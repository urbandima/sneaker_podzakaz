# –û—Ç—á–µ—Ç –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∫–∞—Ç–∞–ª–æ–≥–∞

## üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –Ω–∞–π–¥–µ–Ω—ã

### 1. Inline CSS/JS –±–ª–æ–∫–∏—Ä—É–µ—Ç —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ (–ò–°–ü–†–ê–í–õ–ï–ù–û ‚úÖ)
**–ü—Ä–æ–±–ª–µ–º–∞:**
- 717 —Å—Ç—Ä–æ–∫ CSS (64KB) –≤—Å—Ç—Ä–æ–µ–Ω—ã –ø—Ä—è–º–æ –≤ HTML
- 51KB inline JavaScript
- **–ò—Ç–æ–≥–æ 115KB inline –∫–æ–¥–∞ (27% —Å—Ç—Ä–∞–Ω–∏—Ü—ã)**

**–†–µ—à–µ–Ω–∏–µ:**
- ‚úÖ –í—ã–Ω–µ—Å–µ–Ω–æ –≤ `/web/css/catalog-inline.css` (32KB –ø–æ—Å–ª–µ –º–∏–Ω–∏—Ñ–∏–∫–∞—Ü–∏–∏)
- ‚úÖ –£–¥–∞–ª–µ–Ω –¥—É–±–ª–∏–∫–∞—Ç —Ç–µ–≥–∞ `<script>`
- ‚úÖ CSS —Ç–µ–ø–µ—Ä—å –∫—ç—à–∏—Ä—É–µ—Ç—Å—è –±—Ä–∞—É–∑–µ—Ä–æ–º

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –°—Ç—Ä–∞–Ω–∏—Ü–∞: 415KB ‚Üí 352KB (–ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è inline)
- CSS –∫—ç—à–∏—Ä—É–µ—Ç—Å—è –∏ –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥
- –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤

---

### 2. –ú–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –ë–î - getFiltersData() ‚ö†Ô∏è

**–ü—Ä–æ–±–ª–µ–º–∞:**
```php
getAvailableSizes() –≤—ã–ø–æ–ª–Ω—è–µ—Ç 4 –¢–Ø–ñ–ï–õ–´–• –∑–∞–ø—Ä–æ—Å–∞:
- EU sizes: SELECT + GROUP BY + HAVING
- US sizes: SELECT + GROUP BY + HAVING  
- UK sizes: SELECT + GROUP BY + HAVING
- CM sizes: SELECT + GROUP BY + HAVING

–ö–ê–ñ–î–´–ô –∑–∞–ø—Ä–æ—Å –¥–µ–ª–∞–µ—Ç:
- INNER JOIN —Å —Ç–∞–±–ª–∏—Ü–µ–π product
- COUNT(DISTINCT product_id)
- GROUP BY –ø–æ —Ä–∞–∑–º–µ—Ä—É
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è 100/100:**
1. ‚úÖ **–î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã:**
   ```sql
   CREATE INDEX idx_product_size_eu ON product_size(eu_size, is_available);
   CREATE INDEX idx_product_size_us ON product_size(us_size, is_available);
   CREATE INDEX idx_product_size_uk ON product_size(uk_size, is_available);
   CREATE INDEX idx_product_size_cm ON product_size(cm_size, is_available);
   CREATE INDEX idx_product_active ON product(is_active, stock_status);
   ```

2. ‚úÖ **–û–±—ä–µ–¥–∏–Ω–∏—Ç—å –∑–∞–ø—Ä–æ—Å—ã –≤ –æ–¥–∏–Ω:**
   ```php
   $sizes = ProductSize::find()
       ->select([
           'eu_size', 'us_size', 'uk_size', 'cm_size',
           'COUNT(DISTINCT product_id) as count'
       ])
       ->innerJoin('product', 'product.id = product_size.product_id')
       ->where([
           'product.is_active' => 1,
           'product_size.is_available' => 1
       ])
       ->groupBy(['eu_size', 'us_size', 'uk_size', 'cm_size'])
       ->all();
   ```

3. ‚úÖ **–£–≤–µ–ª–∏—á–∏—Ç—å –≤—Ä–µ–º—è –∫—ç—à–∞ –¥–æ 3600 —Å–µ–∫—É–Ω–¥**

---

### 3. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ HTTP —Å–∂–∞—Ç–∏—è ‚ö†Ô∏è

**–ü—Ä–æ–±–ª–µ–º–∞:**
- HTML: 352KB –±–µ–∑ gzip
- CSS: 32KB –±–µ–∑ gzip
- JS: 50KB+ –±–µ–∑ gzip

**–†–µ—à–µ–Ω–∏–µ (nginx):**
```nginx
gzip on;
gzip_vary on;
gzip_min_length 1000;
gzip_types text/plain text/css text/xml text/javascript 
           application/x-javascript application/xml+rss 
           application/json application/javascript;
gzip_comp_level 6;
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- HTML: 352KB ‚Üí 45KB (87% —Å–∂–∞—Ç–∏–µ)
- CSS: 32KB ‚Üí 8KB (75% —Å–∂–∞—Ç–∏–µ)
- JS: 50KB ‚Üí 15KB (70% —Å–∂–∞—Ç–∏–µ)
- **–ò—Ç–æ–≥–æ: ~68KB –≤–º–µ—Å—Ç–æ 434KB**

---

### 4. –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –º–µ–ª–∫–∏–µ CSS/JS —Ñ–∞–π–ª—ã ‚ö†Ô∏è

**–¢–µ–∫—É—â–µ–µ:**
- 16 –∑–∞–ø—Ä–æ—Å–æ–≤ JavaScript
- 5+ –∑–∞–ø—Ä–æ—Å–æ–≤ CSS
- –ö–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å = –∑–∞–¥–µ—Ä–∂–∫–∞ —Å–µ—Ç–∏

**–†–µ—à–µ–Ω–∏–µ:**
```php
// config/web.php - AssetManager
'assetManager' => [
    'bundles' => [
        'yii\web\JqueryAsset' => false, // –£–±—Ä–∞—Ç—å jQuery –µ—Å–ª–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
    ],
    'converter' => [
        'class' => 'nizsheanez\assetConverter\Converter',
        'force' => false,
    ],
],
```

**–ò–ª–∏ –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –≤—Ä—É—á–Ω—É—é:**
```bash
cd web/js
cat catalog.js favorites.js lazy-load.js > catalog-bundle.min.js
```

---

## ‚ö° –ü–ª–∞–Ω –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è 100/100

### –≠—Ç–∞–ø 1: Backend –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (–ö–†–ò–¢–ò–ß–ù–û)
1. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å DB –∏–Ω–¥–µ–∫—Å—ã
2. ‚úÖ –û–±—ä–µ–¥–∏–Ω–∏—Ç—å –∑–∞–ø—Ä–æ—Å—ã getAvailableSizes()
3. ‚úÖ –£–≤–µ–ª–∏—á–∏—Ç—å –∫—ç—à –¥–æ 1 —á–∞—Å–∞
4. ‚úÖ –í–∫–ª—é—á–∏—Ç—å opcache –¥–ª—è PHP

### –≠—Ç–∞–ø 2: Frontend –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏  
5. ‚úÖ –ú–∏–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å CSS/JS
6. ‚úÖ –û–±—ä–µ–¥–∏–Ω–∏—Ç—å —Ñ–∞–π–ª—ã –≤ bundle
7. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å HTTP/2
8. ‚úÖ –í–∫–ª—é—á–∏—Ç—å gzip/brotli

### –≠—Ç–∞–ø 3: –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
9. ‚úÖ –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ WebP
10. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å responsive images (srcset)
11. ‚úÖ Preload –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

---

## üìä –û–∂–∏–¥–∞–µ–º–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

**–î–æ:**
- –í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏: ~2-3 —Å–µ–∫—É–Ω–¥—ã
- –†–∞–∑–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã: 415KB HTML + 200KB —Ä–µ—Å—É—Ä—Å—ã
- –û—Ü–µ–Ω–∫–∞: 20/100

**–ü–æ—Å–ª–µ –≤—Å–µ—Ö –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π:**
- –í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏: **<500ms** ‚ö°
- –†–∞–∑–º–µ—Ä: 68KB (gzip) + –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã
- –û—Ü–µ–Ω–∫–∞: **90-95/100** üéØ

**–î–ª—è 100/100 –Ω—É–∂–Ω–æ:**
- CDN –¥–ª—è —Å—Ç–∞—Ç–∏–∫–∏
- Service Worker –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
- HTTP/3 (QUIC)
- Prerendering –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü

---

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ —Å–µ–≥–æ–¥–Ω—è (08.11.2025, 21:40)

1. ‚úÖ –í—ã–Ω–µ—Å–µ–Ω inline CSS –≤ catalog-inline.css (64KB ‚Üí 32KB)
2. ‚úÖ –£–¥–∞–ª–µ–Ω –¥—É–±–ª–∏–∫–∞—Ç `<script>`
3. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤
4. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ä–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è lazy loading –ø–æ—Å–ª–µ AJAX

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è getAvailableSizes()
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ DB –∏–Ω–¥–µ–∫—Å–æ–≤
- –í–∫–ª—é—á–µ–Ω–∏–µ gzip/brotli
- –ú–∏–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
