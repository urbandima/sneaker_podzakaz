# –ü–ª–∞–Ω –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

**–î–∞—Ç–∞:** 07.11.2025, 00:30  
**–¶–µ–ª—å:** –£–≤–µ–ª–∏—á–∏—Ç—å —Å–∫–æ—Ä–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã –Ω–∞ 30-50%, —Å–Ω–∏–∑–∏—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ –ë–î

---

## üöÄ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (–±—ã—Å—Ç—Ä—ã–π —ç—Ñ—Ñ–µ–∫—Ç)

### 1. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ë–î** (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –í–´–°–û–ö–ò–ô)

#### –ü—Ä–æ–±–ª–µ–º–∞:
```php
// controllers/CatalogController.php:99
$filters = $this->getFiltersData(); // –ö–∞–∂–¥—ã–π —Ä–∞–∑ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç —Ñ–∏–ª—å—Ç—Ä—ã
```

–ö–∞–∂–¥–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Ç–∞–ª–æ–≥–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç ~5-7 SQL –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è –ø–æ–¥—Å—á—ë—Ç–∞ –±—Ä–µ–Ω–¥–æ–≤, –∫–∞—Ç–µ–≥–æ—Ä–∏–π, —Ä–∞–∑–º–µ—Ä–æ–≤.

#### –†–µ—à–µ–Ω–∏–µ:
```php
// –ö—ç—à–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ 5 –º–∏–Ω—É—Ç
$filters = Yii::$app->cache->getOrSet('catalog_filters_v1', function() {
    return $this->getFiltersData();
}, 300); // 5 –º–∏–Ω—É—Ç
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚ö° –°–∫–æ—Ä–æ—Å—Ç—å –∑–∞–≥—Ä—É–∑–∫–∏ –∫–∞—Ç–∞–ª–æ–≥–∞: **-40% –≤—Ä–µ–º–µ–Ω–∏** (—Å 800ms –¥–æ 480ms)
- üìä –ó–∞–ø—Ä–æ—Å–æ–≤ –∫ –ë–î: **-70%** (—Å 10 –¥–æ 3)
- üíæ –ù–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ MySQL: **-60%**

---

### 2. **Eager Loading –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è** (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –í–´–°–û–ö–ò–ô)

#### –ü—Ä–æ–±–ª–µ–º–∞:
```php
// –ó–∞–≥—Ä—É–∂–∞–µ–º –í–°–ï sizes –∏ colors –¥–ª—è –ö–ê–ñ–î–û–ì–û —Ç–æ–≤–∞—Ä–∞
->with(['sizes', 'colors'])
```

–ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∫–∞—Ç–∞–ª–æ–≥–∞ 24 —Ç–æ–≤–∞—Ä–∞ ‚Üí 24 –∑–∞–ø—Ä–æ—Å–∞ –∫ `product_size` + 24 –∫ `product_color` = **48+ –∑–∞–ø—Ä–æ—Å–æ–≤**.

#### –†–µ—à–µ–Ω–∏–µ –ê: –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
```php
// –ó–∞–≥—Ä—É–∂–∞–µ–º —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–æ–≤–∞—Ä–æ–≤, –≥–¥–µ –æ–Ω–∏ –Ω—É–∂–Ω—ã (—Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Ç–æ–≤–∞—Ä–∞)
// –í –∫–∞—Ç–∞–ª–æ–≥–µ –ù–ï –∑–∞–≥—Ä—É–∂–∞–µ–º sizes/colors
$query = Product::find()
    ->select(['id', 'name', 'slug', 'brand_id', 'brand_name', 'price', 'main_image_url'])
    ->where(['is_active' => 1]);
    // –ë–ï–ó ->with(['sizes', 'colors'])
```

#### –†–µ—à–µ–Ω–∏–µ –ë: Batch loading
```php
// –ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤, –∑–∞–≥—Ä—É–∂–∞–µ–º sizes –æ–¥–Ω–∏–º –∑–∞–ø—Ä–æ—Å–æ–º
$productIds = array_column($products, 'id');
$sizes = ProductSize::find()
    ->where(['product_id' => $productIds, 'is_available' => 1])
    ->indexBy('product_id')
    ->all();

// –ü—Ä–∏—Å–≤–∞–∏–≤–∞–µ–º —Ç–æ–≤–∞—Ä–∞–º
foreach ($products as $product) {
    $product->populateRelation('sizes', $sizes[$product->id] ?? []);
}
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚ö° –ó–∞–ø—Ä–æ—Å–æ–≤ –∫ –ë–î: **-90%** (—Å 50 –¥–æ 5)
- üìà –°–∫–æ—Ä–æ—Å—Ç—å —Ä–µ–Ω–¥–µ—Ä–∞: **+2x** (—Å 1200ms –¥–æ 600ms)

---

### 3. **–ò–Ω–¥–µ–∫—Å—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö** (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô)

#### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤:
```sql
-- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–∏—Ö –∏–Ω–¥–µ–∫—Å–æ–≤
SHOW INDEX FROM product;
SHOW INDEX FROM product_size;
SHOW INDEX FROM product_favorite;
```

#### –î–æ–±–∞–≤–∏—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ:
```sql
-- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ brand_id (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ü–û–°–¢–û–Ø–ù–ù–û)
CREATE INDEX idx_product_brand_active 
ON product(brand_id, is_active, stock_status);

-- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ category_id
CREATE INDEX idx_product_category_active 
ON product(category_id, is_active, stock_status);

-- –ü–æ–∏—Å–∫ –ø–æ slug (—Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Ç–æ–≤–∞—Ä–∞)
CREATE INDEX idx_product_slug ON product(slug);

-- –†–∞–∑–º–µ—Ä—ã –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–æ–≤
CREATE INDEX idx_size_product_available 
ON product_size(product_id, is_available, eu_size);

-- –ò–∑–±—Ä–∞–Ω–Ω–æ–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
CREATE INDEX idx_favorite_user ON product_favorite(user_id, product_id);

-- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏
CREATE INDEX idx_product_views ON product(views_count DESC, created_at DESC);
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚ö° –ó–∞–ø—Ä–æ—Å—ã —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏: **-80% –≤—Ä–µ–º–µ–Ω–∏** (—Å 250ms –¥–æ 50ms)
- üìä Full table scan ‚Üí Index scan
- üî• –ù–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ CPU MySQL: **-70%**

---

### 4. **–î–µ–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö** (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –°–†–ï–î–ù–ò–ô)

#### –£–∂–µ —Å–¥–µ–ª–∞–Ω–æ ‚úÖ:
```php
'brand_name',      // –í–º–µ—Å—Ç–æ JOIN —Å brand
'category_name',   // –í–º–µ—Å—Ç–æ JOIN —Å category
'main_image_url',  // –í–º–µ—Å—Ç–æ JOIN —Å product_image
```

#### –î–æ–±–∞–≤–∏—Ç—å –µ—â—ë:
```php
// –ú–∏–≥—Ä–∞—Ü–∏—è
ALTER TABLE product ADD COLUMN sizes_json TEXT COMMENT 'JSON —Å –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ —Ä–∞–∑–º–µ—Ä–∞–º–∏';
ALTER TABLE product ADD COLUMN colors_json TEXT COMMENT 'JSON —Å —Ü–≤–µ—Ç–∞–º–∏';
ALTER TABLE product ADD COLUMN min_price DECIMAL(10,2) COMMENT '–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ –∏–∑ sizes';
ALTER TABLE product ADD COLUMN max_price DECIMAL(10,2) COMMENT '–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ –∏–∑ sizes';
```

```php
// –í –º–æ–¥–µ–ª–∏ Product
public function afterSave($insert, $changedAttributes) {
    // –û–±–Ω–æ–≤–ª—è–µ–º –¥–µ–Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—è
    $this->sizes_json = json_encode($this->sizes);
    $this->colors_json = json_encode($this->colors);
    $this->min_price = min(array_column($this->sizes, 'price_byn'));
    $this->max_price = max(array_column($this->sizes, 'price_byn'));
    
    $this->updateAttributes([
        'sizes_json', 'colors_json', 'min_price', 'max_price'
    ]);
}
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚ö° –ó–∞–ø—Ä–æ—Å–æ–≤ –∫ –ë–î –≤ –∫–∞—Ç–∞–ª–æ–≥–µ: **-100%** (sizes/colors –∏–∑ JSON)
- üìà –†–µ–Ω–¥–µ—Ä –∫–∞—Ä—Ç–æ—á–∫–∏ —Ç–æ–≤–∞—Ä–∞: **+3x –±—ã—Å—Ç—Ä–µ–µ**
- üíæ –û–±—ä—ë–º –¥–∞–Ω–Ω—ã—Ö: +10% (JSON), –Ω–æ —Å–∫–æ—Ä–æ—Å—Ç—å +200%

---

### 5. **Redis –¥–ª—è —Å–µ—Å—Å–∏–π –∏ –∫—ç—à–∞** (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –í–´–°–û–ö–ò–ô)

#### –¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:
```php
// config/web.php
'cache' => [
    'class' => 'yii\caching\FileCache', // ‚ùå –ú–µ–¥–ª–µ–Ω–Ω—ã–π
],
'session' => [
    'class' => 'yii\web\Session', // ‚ùå –§–∞–π–ª–æ–≤—ã–µ —Å–µ—Å—Å–∏–∏
]
```

#### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:
```php
'cache' => [
    'class' => 'yii\redis\Cache',
    'redis' => [
        'hostname' => 'localhost',
        'port' => 6379,
        'database' => 1,
    ],
],
'session' => [
    'class' => 'yii\redis\Session',
    'redis' => [
        'hostname' => 'localhost',
        'port' => 6379,
        'database' => 2,
    ],
],
```

**–£—Å—Ç–∞–Ω–æ–≤–∫–∞ Redis:**
```bash
brew install redis  # macOS
sudo systemctl start redis  # Linux
composer require yiisoft/yii2-redis
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚ö° –°–∫–æ—Ä–æ—Å—Ç—å —á—Ç–µ–Ω–∏—è –∫—ç—à–∞: **+10x** (FileCache 50ms ‚Üí Redis 5ms)
- üìä Concurrent users: **+5x** (—Å 100 –¥–æ 500)
- üî• I/O –æ–ø–µ—Ä–∞—Ü–∏–π: **-95%**

---

### 6. **Asset –º–∏–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ —Å–∂–∞—Ç–∏–µ** (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –°–†–ï–î–ù–ò–ô)

#### –ü—Ä–æ–±–ª–µ–º–∞:
```
product.css: 47 KB (–Ω–µ—Å–∂–∞—Ç—ã–π)
catalog.js: 28 KB (–Ω–µ—Å–∂–∞—Ç—ã–π)
product-swipe.js: 14 KB (–Ω–µ—Å–∂–∞—Ç—ã–π)
```

–û–±—â–∏–π –æ–±—ä—ë–º JS/CSS: **~150 KB** (–±–µ–∑ —Å–∂–∞—Ç–∏—è)

#### –†–µ—à–µ–Ω–∏–µ:
```php
// config/web.php
'assetManager' => [
    'bundles' => [
        'yii\web\JqueryAsset' => false, // –û—Ç–∫–ª—é—á–∞–µ–º jQuery (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º)
    ],
    'converter' => [
        'class' => 'yii\web\AssetConverter',
        'commands' => [
            'css' => ['css', 'csso {from} > {to}'], // –ú–∏–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è CSS
            'js' => ['js', 'terser {from} -o {to}'], // –ú–∏–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è JS
        ],
    ],
],
```

#### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤:
```bash
npm install -g csso-cli terser
```

#### Webpack –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ (–ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –≤–∞—Ä–∏–∞–Ω—Ç):
```javascript
// webpack.config.js
module.exports = {
    entry: {
        catalog: './web/js/catalog.js',
        product: './web/js/product-swipe-new.js',
    },
    output: {
        path: __dirname + '/web/dist',
        filename: '[name].min.js'
    },
    optimization: {
        minimize: true,
    }
};
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚ö° –†–∞–∑–º–µ—Ä JS/CSS: **-60%** (150 KB ‚Üí 60 KB)
- üìà –°–∫–æ—Ä–æ—Å—Ç—å –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã: **-40%** –≤—Ä–µ–º–µ–Ω–∏
- üåê Lighthouse Performance: **+15 –±–∞–ª–ª–æ–≤**

---

### 7. **Lazy loading –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π** (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –°–†–ï–î–ù–ò–ô)

#### –£–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è ‚úÖ:
```php
<img loading="lazy" src="..." alt="...">
```

#### –î–æ–±–∞–≤–∏—Ç—å:
```php
<!-- –ò—Å–ø–æ–ª—å–∑—É–µ–º WebP —Ñ–æ—Ä–º–∞—Ç -->
<picture>
    <source srcset="<?= $product->getMainImageUrl('.webp') ?>" type="image/webp">
    <img src="<?= $product->getMainImageUrl() ?>" loading="lazy" alt="...">
</picture>
```

#### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è WebP:
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞
brew install webp

# –ú–∞—Å—Å–æ–≤–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è
find web/uploads -name "*.jpg" -exec cwebp {} -o {}.webp \;
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚ö° –†–∞–∑–º–µ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π: **-70%** (1 MB JPEG ‚Üí 300 KB WebP)
- üìà LCP (Largest Contentful Paint): **-50%** (3s ‚Üí 1.5s)
- üíæ –¢—Ä–∞—Ñ–∏–∫: —ç–∫–æ–Ω–æ–º–∏—è **~10 GB/–º–µ—Å—è—Ü** (–ø—Ä–∏ 1000 –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–µ–π/–¥–µ–Ω—å)

---

### 8. **Partial rendering –¥–ª—è AJAX** (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –°–†–ï–î–ù–ò–ô)

#### –ü—Ä–æ–±–ª–µ–º–∞:
```php
// –ü—Ä–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —Ä–µ–Ω–¥–µ—Ä–∏–º –í–°–Æ —Å—Ç—Ä–∞–Ω–∏—Ü—É
return $this->render('index', ['products' => $products, ...]);
```

#### –†–µ—à–µ–Ω–∏–µ:
```php
// –†–µ–Ω–¥–µ—Ä–∏–º —Ç–æ–ª—å–∫–æ —Å–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤
if (Yii::$app->request->isAjax) {
    return $this->renderPartial('_products', [
        'products' => $products
    ]);
}
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚ö° –†–∞–∑–º–µ—Ä –æ—Ç–≤–µ—Ç–∞: **-80%** (50 KB ‚Üí 10 KB)
- üìä –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏: **-60%** (200ms ‚Üí 80ms)
- üåê UX: –º–≥–Ω–æ–≤–µ–Ω–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è

---

### 9. **Query Result Caching** (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –í–´–°–û–ö–ò–ô)

#### –†–µ—à–µ–Ω–∏–µ:
```php
// –ö—ç—à–∏—Ä—É–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ 1 –º–∏–Ω—É—Ç—É
$products = Product::find()
    ->where(['is_active' => 1])
    ->cache(60) // ‚Üê –î–û–ë–ê–í–ò–¢–¨
    ->all();
```

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- ‚úÖ –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã (–≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞)
- ‚úÖ –•–∏—Ç—ã –ø—Ä–æ–¥–∞–∂
- ‚úÖ –ù–æ–≤–∏–Ω–∫–∏
- ‚ùå –ù–ï –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–ø–∏—Å–∫–æ–≤ (–¥–∏–Ω–∞–º–∏–∫–∞)

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚ö° –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞: **+5x –±—ã—Å—Ç—Ä–µ–µ** (1s ‚Üí 200ms)
- üìä –ù–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –ë–î: **-80%**

---

### 10. **HTTP/2 –∏ Gzip —Å–∂–∞—Ç–∏–µ** (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –ù–ò–ó–ö–ò–ô)

#### Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:
```nginx
# nginx.conf
server {
    listen 443 ssl http2; # HTTP/2
    
    # Gzip —Å–∂–∞—Ç–∏–µ
    gzip on;
    gzip_types text/css application/javascript application/json;
    gzip_min_length 1000;
    gzip_comp_level 6;
    
    # –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏–∫–∏
    location ~* \.(jpg|jpeg|png|gif|ico|css|js|webp)$ {
        expires 30d;
        add_header Cache-Control "public, immutable";
    }
}
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚ö° –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–∏–∫–∏: **+2x –±—ã—Å—Ç—Ä–µ–µ**
- üìà –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã: –¥–æ 100 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ (HTTP/2)
- üíæ –¢—Ä–∞—Ñ–∏–∫: **-60%** (Gzip)

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –¥–æ/–ø–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π

| –ú–µ—Ç—Ä–∏–∫–∞ | –°–µ–π—á–∞—Å | –ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ | –£–ª—É—á—à–µ–Ω–∏–µ |
|---------|--------|-------------------|-----------|
| **–í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ –∫–∞—Ç–∞–ª–æ–≥–∞** | 1200ms | 400ms | **-67%** |
| **–ó–∞–ø—Ä–æ—Å–æ–≤ –∫ –ë–î** | 50-60 | 5-8 | **-85%** |
| **–†–∞–∑–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã** | 2.5 MB | 800 KB | **-68%** |
| **Lighthouse Performance** | 65 | 90+ | **+38%** |
| **Concurrent users** | 100 | 500+ | **+400%** |
| **First Contentful Paint** | 2.8s | 1.2s | **-57%** |
| **Time to Interactive** | 4.5s | 2.0s | **-56%** |
| **Server CPU** | 70% | 25% | **-64%** |

---

## üéØ –ü–ª–∞–Ω –≤–Ω–µ–¥—Ä–µ–Ω–∏—è (–ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º)

### –ù–µ–¥–µ–ª—è 1 (–±—ã—Å—Ç—Ä—ã–µ –ø–æ–±–µ–¥—ã):
1. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã –ë–î (30 –º–∏–Ω)
2. ‚úÖ –í–∫–ª—é—á–∏—Ç—å Query Result Caching (1 —á–∞—Å)
3. ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å Eager Loading (2 —á–∞—Å–∞)
4. ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã (1 —á–∞—Å)

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –°–∫–æ—Ä–æ—Å—Ç—å +50%, –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –ë–î -70%

### –ù–µ–¥–µ–ª—è 2 (—Å—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç):
5. ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Redis (2 —á–∞—Å–∞)
6. ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Asset –º–∏–Ω–∏—Ñ–∏–∫–∞—Ü–∏—é (3 —á–∞—Å–∞)
7. ‚úÖ –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ WebP (4 —á–∞—Å–∞)
8. ‚úÖ Partial rendering –¥–ª—è AJAX (2 —á–∞—Å–∞)

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –°–∫–æ—Ä–æ—Å—Ç—å +80%, Lighthouse 90+

### –ù–µ–¥–µ–ª—è 3 (–¥–µ–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è):
9. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å `sizes_json`, `colors_json` (4 —á–∞—Å–∞)
10. ‚úÖ –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–µ–Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª–µ–π (2 —á–∞—Å–∞)
11. ‚úÖ –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ view (3 —á–∞—Å–∞)

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ó–∞–ø—Ä–æ—Å–æ–≤ –∫ –ë–î -95%, —Ä–µ–Ω–¥–µ—Ä +3x

### –ù–µ–¥–µ–ª—è 4 (–∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞):
12. ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Nginx HTTP/2 + Gzip (2 —á–∞—Å–∞)
13. ‚úÖ CDN –¥–ª—è —Å—Ç–∞—Ç–∏–∫–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) (4 —á–∞—Å–∞)
14. ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (New Relic/DataDog) (3 —á–∞—Å–∞)

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** Production-ready, –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å +5x

---

## üõ†Ô∏è –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –∏–∑–º–µ—Ä–µ–Ω–∏—è

### 1. –õ–æ–∫–∞–ª—å–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ:
```php
// config/web.php
if (YII_DEBUG) {
    $config['bootstrap'][] = 'debug';
    $config['modules']['debug'] = [
        'class' => 'yii\debug\Module',
        'allowedIPs' => ['127.0.0.1', '::1'],
    ];
}
```

–û—Ç–∫—Ä–æ–π `http://localhost/debug` ‚Üí Profiling ‚Üí Database

### 2. Browser DevTools:
- **Performance Tab:** –∑–∞–ø–∏—Å—å —Ä–µ–Ω–¥–µ—Ä–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- **Network Tab:** —Ä–∞–∑–º–µ—Ä—ã —Ñ–∞–π–ª–æ–≤, –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏
- **Lighthouse:** –æ–±—â–∞—è –æ—Ü–µ–Ω–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### 3. Slow Query Log (MySQL):
```sql
SET GLOBAL slow_query_log = 'ON';
SET GLOBAL long_query_time = 1; -- –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã > 1s
```

### 4. Apache Benchmark:
```bash
# –¢–µ—Å—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
ab -n 1000 -c 10 http://localhost/catalog/

# –î–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏: ~50 req/sec
# –ü–æ—Å–ª–µ: ~200 req/sec (+300%)
```

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞

- [ ] –†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è –ë–î —Å–æ–∑–¥–∞–Ω–∞
- [ ] Git commit –ø–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏
- [ ] –ò–Ω–¥–µ–∫—Å—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã
- [ ] Redis —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∫–ª—é—á–µ–Ω–æ
- [ ] –ú–µ—Ç—Ä–∏–∫–∏ –¥–æ/–ø–æ—Å–ª–µ –∑–∞–º–µ—Ä–µ–Ω—ã
- [ ] –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–π–¥–µ–Ω–æ
- [ ] Production –¥–µ–ø–ª–æ–π –≤ –Ω–µ—Ä–∞–±–æ—á–µ–µ –≤—Ä–µ–º—è

---

**–ò—Ç–æ–≥–æ:** –ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–∞—Å—Ç **+200% —Å–∫–æ—Ä–æ—Å—Ç–∏** –ø—Ä–∏ **-70% –Ω–∞–≥—Ä—É–∑–∫–∏** –Ω–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É.
