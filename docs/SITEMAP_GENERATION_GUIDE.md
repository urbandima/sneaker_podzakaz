# üó∫Ô∏è –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ Sitemap

**–î–∞—Ç–∞:** 09.11.2025  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–°—Ç–∞—Ç—É—Å:** Production Ready

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–±–∑–æ—Ä](#–æ–±–∑–æ—Ä)
2. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
3. [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
4. [–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ](#–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ-–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ)
5. [–ö–æ–Ω—Å–æ–ª—å–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞](#–∫–æ–Ω—Å–æ–ª—å–Ω–∞—è-–∫–æ–º–∞–Ω–¥–∞)
6. [–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥](#–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥)
7. [–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è](#–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è)

---

## –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ sitemap –≤–∫–ª—é—á–∞–µ—Ç:

### –§–∞–π–ª—ã sitemap
- ‚úÖ **sitemap.xml** ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª (–≥–ª–∞–≤–Ω–∞—è, —Å—Ç–∞—Ç–∏–∫–∞, –±—Ä–µ–Ω–¥—ã, –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, —Ç–æ–≤–∞—Ä—ã, —Ñ–∏–ª—å—Ç—Ä—ã)
- ‚úÖ **sitemap-images.xml** ‚Äî —Ç–æ–ø-1000 —Ç–æ–≤–∞—Ä–æ–≤ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏

### –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è** –±–µ–∑ cron (—á–µ—Ä–µ–∑ —Å–æ–±—ã—Ç–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
- **–ü–æ—Ç–æ–∫–æ–≤–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è XML** –¥–ª—è –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏–∏ –ø–∞–º—è—Ç–∏
- **–ë–∞—Ç—á-–æ–±—Ä–∞–±–æ—Ç–∫–∞** —Ç–æ–≤–∞—Ä–æ–≤ (500 —à—Ç/–±–∞—Ç—á)
- **–í–∞–ª–∏–¥–∞—Ü–∏—è XML** –≤ dev-—Ä–µ–∂–∏–º–µ
- **–ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏** (–≤—Ä–µ–º—è, –ø–∞–º—è—Ç—å, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ URL)
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–æ–∫** –∞—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

#### 1. **SitemapGenerator** (`services/Sitemap/SitemapGenerator.php`)
–û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:
```php
$generator = new SitemapGenerator('https://sneakerhead.by');
$generator->generate();
```

#### 2. **–°–µ–∫—Ü–∏–∏** (`services/Sitemap/sections/`)
- `HomeSection` ‚Äî –≥–ª–∞–≤–Ω–∞—è –∏ –∫–∞—Ç–∞–ª–æ–≥
- `StaticSection` ‚Äî —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–æ –Ω–∞—Å, –∫–æ–Ω—Ç–∞–∫—Ç—ã)
- `BrandSection` ‚Äî –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –±—Ä–µ–Ω–¥—ã
- `CategorySection` ‚Äî –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- `ProductSection` ‚Äî –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã (–±–∞—Ç—á-–æ–±—Ä–∞–±–æ—Ç–∫–∞)
- `FilterSection` ‚Äî —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å —Ä–µ–∞–ª—å–Ω—ã–º –∞—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç–æ–º
- `ImageSection` ‚Äî —Ç–æ–ø-1000 —Ç–æ–≤–∞—Ä–æ–≤ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏

#### 3. **SitemapAutoGenerator** (`components/SitemapAutoGenerator.php`)
–ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ `EVENT_AFTER_REQUEST`:
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ñ–ª–∞–≥ `SitemapNotifier::isPending()`
- –õ–æ–∫–∞–ª—å–Ω—ã–π –∫—ç—à (60 —Å–µ–∫) –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏
- –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–ø—É—Å–∫–æ–≤ (10 –º–∏–Ω)
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `fastcgi_finish_request()` –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω

#### 4. **SitemapNotifier** (`components/SitemapNotifier.php`)
–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–ª–∞–≥–∞–º–∏:
```php
SitemapNotifier::scheduleRegeneration(); // –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ñ–ª–∞–≥
SitemapNotifier::isPending();            // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–ª–∞–≥
SitemapNotifier::reset();                 // –°–±—Ä–æ—Å–∏—Ç—å –ø–æ—Å–ª–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
```

#### 5. **–¢—Ä–∏–≥–≥–µ—Ä—ã –≤ –º–æ–¥–µ–ª—è—Ö**
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ñ–ª–∞–≥–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö:
- `Product::afterSave()` / `afterDelete()`
- `Brand::afterSave()` / `afterDelete()`
- `Category::afterSave()` / `afterDelete()`
- `FilterHistory::saveFilters()`

---

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### config/params.php

```php
'sitemap' => [
    'filterMaxPages' => 5000,          // –ú–∞–∫—Å–∏–º—É–º —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü
    'filterMinResults' => 5,           // –ú–∏–Ω–∏–º—É–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è
    'productBatchSize' => 500,         // –†–∞–∑–º–µ—Ä –±–∞—Ç—á–∞ –¥–ª—è —Ç–æ–≤–∞—Ä–æ–≤
    'imageBatchSize' => 500,           // –†–∞–∑–º–µ—Ä –±–∞—Ç—á–∞ –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
    'imageLimit' => 5,                 // –õ–∏–º–∏—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–∞ —Ç–æ–≤–∞—Ä
    'topProductsForImages' => 1000,    // –¢–æ–ø —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è image sitemap
    'lockTtl' => 600,                  // –í—Ä–µ–º—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ (10 –º–∏–Ω)
    'cacheCheckInterval' => 60,        // –ò–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ–ª–∞–≥–∞ (1 –º–∏–Ω)
    'enableValidation' => YII_ENV_DEV, // –í–∞–ª–∏–¥–∞—Ü–∏—è XML (—Ç–æ–ª—å–∫–æ dev)
    'changefreqHigh' => 'daily',       // –ß–∞—Å—Ç–æ—Ç–∞ –¥–ª—è –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü
    'changefreqLow' => 'weekly',       // –ß–∞—Å—Ç–æ—Ç–∞ –¥–ª—è —Ä–µ–¥–∫–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü
],
```

### config/web.php

```php
'bootstrap' => ['log', 'sitemapAutoGenerator'],
'components' => [
    'sitemapAutoGenerator' => [
        'class' => 'app\components\SitemapAutoGenerator',
    ],
    // ...
],
```

### .env (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```env
FRONTEND_URL=https://sneakerhead.by
```

---

## –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

### –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã

1. **–ò–∑–º–µ–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö** ‚Üí `SitemapNotifier::scheduleRegeneration()`
2. **–°–ª–µ–¥—É—é—â–∏–π –≤–µ–±-–∑–∞–ø—Ä–æ—Å** ‚Üí `SitemapAutoGenerator` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ñ–ª–∞–≥
3. **–ï—Å–ª–∏ —Ñ–ª–∞–≥ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω** ‚Üí –≥–µ–Ω–µ—Ä–∞—Ü–∏—è sitemap + —Å–±—Ä–æ—Å —Ñ–ª–∞–≥–∞

### –£—Å–ª–æ–≤–∏—è –∑–∞–ø—É—Å–∫–∞

- ‚úÖ –§–ª–∞–≥ `pending` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- ‚úÖ –ù–µ AJAX –∑–∞–ø—Ä–æ—Å
- ‚úÖ –ù–µ —Ä–æ—É—Ç `/sitemap*`
- ‚úÖ –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –Ω–µ –∞–∫—Ç–∏–≤–Ω–∞ (< 10 –º–∏–Ω)
- ‚úÖ –õ–æ–∫–∞–ª—å–Ω—ã–π –∫—ç—à –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏—Å—Ç—ë–∫ (> 60 —Å–µ–∫)

### –ü—Ä–∏–º–µ—Ä

```php
// –í –∞–¥–º–∏–Ω–∫–µ –¥–æ–±–∞–≤–∏–ª–∏ —Ç–æ–≤–∞—Ä
$product = new Product();
$product->name = 'Nike Air Max 90';
$product->save(); // ‚Üí SitemapNotifier::scheduleRegeneration()

// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞—à—ë–ª –Ω–∞ /catalog
// ‚Üí SitemapAutoGenerator –æ–±–Ω–∞—Ä—É–∂–∏–ª —Ñ–ª–∞–≥
// ‚Üí –ó–∞–ø—É—Å—Ç–∏–ª –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ—Ç–≤–µ—Ç–∞
// ‚Üí Sitemap –æ–±–Ω–æ–≤–ª—ë–Ω
```

---

## –ö–æ–Ω—Å–æ–ª—å–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞

### –†—É—á–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è

```bash
# –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
php yii sitemap/generate

# –° —É–∫–∞–∑–∞–Ω–∏–µ–º –±–∞–∑–æ–≤–æ–≥–æ URL
php yii sitemap/generate --baseUrl=https://sneakerhead.by

# –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω —Ñ–ª–∞–≥ pending (–¥–ª—è cron)
php yii sitemap/generate --ifPending
```

### –°—Ç–∞—Ç—É—Å –æ—á–µ—Ä–µ–¥–∏

```bash
php yii sitemap/status
```

**–í—ã–≤–æ–¥:**
```
‚ú≥Ô∏é –û–∂–∏–¥–∞–µ—Ç —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å 2025-11-09 11:30
–ü–æ—Å–ª–µ–¥–Ω—è—è —É—Å–ø–µ—à–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è: 2025-11-09 10:45
–ü—É—Ç–∏: /path/to/web/sitemap.xml, /path/to/web/sitemap-images.xml
```

### Cron (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ cron:

```cron
# –ö–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç –ø—Ä–æ–≤–µ—Ä—è–µ–º —Ñ–ª–∞–≥
*/30 * * * * cd /var/www/html && php yii sitemap/generate --ifPending >> /var/log/sitemap.log 2>&1
```

---

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏

–í—Å–µ —Å–æ–±—ã—Ç–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ `runtime/logs/app.log`:

```log
[info] Sitemap generated successfully | Duration: 12.45s | URLs: 15234 | Memory: 45.2 MB | Peak: 78.1 MB
[info] Main sitemap generated: /path/to/web/sitemap.xml
[info] Image sitemap generated successfully
[info] Sitemap XML validation passed
```

### –û—à–∏–±–∫–∏

```log
[error] Sitemap generation failed: Failed to open temporary file
[warning] Sitemap XML validation failed: Invalid XML structure
[error] Image sitemap generation failed: Connection timeout
```

### –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

–ö–∞–∂–¥–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ª–æ–≥–∏—Ä—É–µ—Ç:
- **Duration** ‚Äî –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- **URLs** ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö URL
- **Memory** ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω–∞—è –ø–∞–º—è—Ç—å
- **Peak** ‚Äî –ø–∏–∫–æ–≤–∞—è –ø–∞–º—è—Ç—å

---

## –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

#### –¢–æ–≤–∞—Ä—ã (ProductSection)
- ‚úÖ –ë–∞—Ç—á-–æ–±—Ä–∞–±–æ—Ç–∫–∞: 500 —Ç–æ–≤–∞—Ä–æ–≤/–±–∞—Ç—á
- ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –≤—ã–±–æ—Ä–∫–∞ –ø–æ–ª–µ–π: `id, slug, name, main_image_url, updated_at`
- ‚úÖ –ë–µ–∑ eager loading (–Ω–µ—Ç N+1)

#### –§–∏–ª—å—Ç—Ä—ã (FilterSection)
- ‚úÖ –õ–æ–∫–∞–ª—å–Ω—ã–π –∫—ç—à –ø—Ä–æ–≤–µ—Ä–æ–∫ –∞—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç–∞
- ‚úÖ –õ–∏–º–∏—Ç: 5000 –∫–æ–º–±–∏–Ω–∞—Ü–∏–π
- ‚úÖ –ú–∏–Ω–∏–º—É–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤: 5
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ `exists()` –≤–º–µ—Å—Ç–æ `count()`

#### –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (ImageSection)
- ‚úÖ –¢–æ–ø-1000 —Ç–æ–≤–∞—Ä–æ–≤ –ø–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞–º
- ‚úÖ Inner join —Å `product_image` (—Ç–æ–ª—å–∫–æ —Ç–æ–≤–∞—Ä—ã —Å —Ñ–æ—Ç–æ)
- ‚úÖ –õ–∏–º–∏—Ç: 5 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π/—Ç–æ–≤–∞—Ä
- ‚úÖ –ë–∞—Ç—á-–æ–±—Ä–∞–±–æ—Ç–∫–∞: 500 —Ç–æ–≤–∞—Ä–æ–≤/–±–∞—Ç—á

#### –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä (SitemapAutoGenerator)
- ‚úÖ –õ–æ–∫–∞–ª—å–Ω—ã–π –∫—ç—à –ø—Ä–æ–≤–µ—Ä–∫–∏ (60 —Å–µ–∫)
- ‚úÖ –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –∑–∞–ø—É—Å–∫–æ–≤ (10 –º–∏–Ω)
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `fastcgi_finish_request()`
- ‚úÖ –ü—Ä–æ–ø—É—Å–∫ AJAX –∏ —Å–ª—É–∂–µ–±–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

### –ü–∞–º—è—Ç—å

–ü—Ä–∏ 50k —Ç–æ–≤–∞—Ä–æ–≤:
- **Peak memory:** ~100 MB
- **Duration:** ~25 —Å–µ–∫—É–Ω–¥
- **–†–∞–∑–º–µ—Ä sitemap.xml:** ~6 MB
- **–†–∞–∑–º–µ—Ä sitemap-images.xml:** ~2 MB

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

### 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å

```bash
curl -I https://sneakerhead.by/sitemap.xml
curl -I https://sneakerhead.by/sitemap-images.xml
```

### 2. –í–∞–ª–∏–¥–∞—Ü–∏—è XML

```bash
xmllint --noout /path/to/web/sitemap.xml
xmllint --noout /path/to/web/sitemap-images.xml
```

### 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ robots.txt

```
https://sneakerhead.by/robots.txt
```

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```
Sitemap: https://sneakerhead.by/sitemap.xml
Sitemap: https://sneakerhead.by/sitemap-images.xml
```

### 4. Google Search Console

–û—Ç–ø—Ä–∞–≤–∏—Ç—å sitemap:
1. https://search.google.com/search-console
2. –ò–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Üí –§–∞–π–ª—ã Sitemap
3. –î–æ–±–∞–≤–∏—Ç—å `https://sneakerhead.by/sitemap.xml`
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å

---

## Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: Sitemap –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–ª–∞–≥: `php yii sitemap/status`
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏: `tail -f runtime/logs/app.log | grep Sitemap`
3. –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ: `php yii sitemap/generate`

### –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∞ "Failed to rename sitemap file"

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ—Ç –ø—Ä–∞–≤ –Ω–∞ –∑–∞–ø–∏—Å—å

**–†–µ—à–µ–Ω–∏–µ:**
```bash
chmod 775 web/
chown www-data:www-data web/sitemap*.xml
```

### –ü—Ä–æ–±–ª–µ–º–∞: –°–ª–∏—à–∫–æ–º –¥–æ–ª–≥–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–º–µ–Ω—å—à–∏—Ç—å `filterMaxPages` –≤ config/params.php
2. –£–º–µ–Ω—å—à–∏—Ç—å `topProductsForImages`
3. –£–≤–µ–ª–∏—á–∏—Ç—å `productBatchSize` (–æ—Å—Ç–æ—Ä–æ–∂–Ω–æ —Å –ø–∞–º—è—Ç—å—é)

### –ü—Ä–æ–±–ª–µ–º–∞: –ú–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ë–î

**–ü—Ä–∏—á–∏–Ω–∞:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤

**–†–µ—à–µ–Ω–∏–µ:**
- –õ–æ–∫–∞–ª—å–Ω—ã–π –∫—ç—à —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- –£–≤–µ–ª–∏—á–∏—Ç—å `filterMinResults` –¥–ª—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è —Ä–µ–¥–∫–∏—Ö –∫–æ–º–±–∏–Ω–∞—Ü–∏–π

---

## Changelog

### v1.0 (09.11.2025)
- ‚úÖ –ü–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ sitemap
- ‚úÖ –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–µ–∑ cron
- ‚úÖ –ë–∞—Ç—á-–æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
- ‚úÖ –ú–µ—Ç—Ä–∏–∫–∏ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è
- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–æ–∫
- ‚úÖ Production-ready –∫–æ–¥

---

**–ê–≤—Ç–æ—Ä:** Cascade AI  
**–ü—Ä–æ–µ–∫—Ç:** –°–ù–ò–ö–ï–†–•–≠–î E-commerce
