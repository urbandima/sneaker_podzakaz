# Унификация ширины контейнеров

**Дата:** 2025-11-09  
**Статус:** ✅ Завершено

## Проблема

Разные страницы сайта имели разную максимальную ширину контейнеров:
- **Header** (main.php): Bootstrap по умолчанию (~1140-1320px)
- **Catalog** (catalog-layout.css): `max-width: 100%` (полная ширина)
- **Product** (product-page.css): `max-width: 1200px`
- **Critical.css**: `max-width: 1400px`

Это создавало визуальную несогласованность — контент "прыгал" по ширине при переходе между страницами.

## Решение

Создана **единая система контейнеров** с фиксированной максимальной шириной **1400px** для всех страниц.

### Изменения

#### 1. Создан новый файл: `web/css/container-system.css`
- Глобальные CSS-переменные для ширины контейнеров
- Единая `max-width: 1400px` для всех контейнеров
- Адаптивные отступы для разных разрешений:
  - Mobile: 16px
  - Tablet: 24px
  - Desktop: 32px
  - XL: 40px
- Специфичные правила для:
  - `.container` (основной контейнер)
  - `.main-header .container` (header)
  - `.main-nav .container` (навигация)
  - `.content` (контент каталога)
  - `.product-layout` (layout товара)
  - `.nav-menu` (меню навигации)

#### 2. Обновлен `assets/AppAsset.php`
```php
public $css = [
    'css/container-system.css', // ВАЖНО: Первым для единой ширины
    'css/site.css',
    // ...
];
```

#### 3. Обновлены CSS файлы
- **catalog-layout.css**: Удалены переопределения `max-width: 100%`
- **product-page.css**: Удалено `max-width: 1200px`, теперь использует глобальные настройки
- **critical.css**: Добавлен комментарий о приоритете `container-system.css`
- **mobile-first.css**: Удалены конфликтующие переопределения `width: 80%` и `max-width: 1920px`

#### 4. Обновлен `views/layouts/main.php`
- Добавлен комментарий о единой ширине контейнера

## Результат

✅ **Header, Catalog и Product страницы теперь имеют одинаковую ширину 1400px**  
✅ Визуальная согласованность на всех страницах  
✅ Единая точка управления шириной контейнеров  
✅ Адаптивные отступы для всех разрешений  

## Как изменить ширину в будущем

Отредактируйте одну переменную в `web/css/container-system.css`:

```css
:root {
    --container-max-width: 1400px; /* Измените здесь */
}
```

Изменение автоматически применится ко всем страницам.

## Тестирование

Проверьте визуальную согласованность на:
1. Главная страница (header)
2. Страница каталога `/catalog`
3. Страница товара `/catalog/product/*`
4. Админ-панель

Все контейнеры должны иметь одинаковую ширину и выравнивание.

## Технические детали

### CSS Specificity
Используется `!important` для переопределения Bootstrap и других стилей:
```css
.container {
    max-width: var(--container-max-width) !important;
    margin-left: auto !important;
    margin-right: auto !important;
}
```

### Порядок загрузки CSS
1. `container-system.css` (первым через AppAsset)
2. `site.css`
3. Остальные специфичные стили

Это гарантирует, что глобальные настройки контейнеров применяются раньше всех остальных стилей.
