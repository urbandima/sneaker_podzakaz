# üîß –û—Ç–ª–∞–¥–∫–∞ Sticky-–ø–∞–Ω–µ–ª–∏ –∏ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –º–æ–¥–µ–ª–∏

**–î–∞—Ç–∞:** 05.11.2024, 22:53  
**–ü—Ä–æ–±–ª–µ–º—ã:** Sticky-–ø–∞–Ω–µ–ª—å –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è, –≤–∞—Ä–∏–∞–Ω—Ç—ã –º–æ–¥–µ–ª–∏ –Ω–µ –≤–∏–¥–Ω—ã

---

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ:

### 1. Sticky-–ø–∞–Ω–µ–ª—å
- ‚úÖ –°–æ–∑–¥–∞–Ω `/web/js/sticky-bar.js`
- ‚úÖ –°–æ–∑–¥–∞–Ω `/web/css/product-enhancements.css`
- ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω—ã –≤ `product.php`
- ‚úÖ HTML –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–æ–Ω–µ—Ü —Å—Ç—Ä–∞–Ω–∏—Ü—ã

### 2. –í–∞—Ä–∏–∞–Ω—Ç—ã –º–æ–¥–µ–ª–∏
- ‚úÖ –õ–æ–≥–∏–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ `product.php` (—Å—Ç—Ä–æ–∫–∏ 573-633)
- ‚úÖ –°—Ç–∏–ª–∏ –≤ `product-enhancements.css`
- ‚úÖ Fallback: –µ—Å–ª–∏ –Ω–µ—Ç `series_name`, –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ç–æ–≤–∞—Ä—ã —Ç–æ–≥–æ –∂–µ –±—Ä–µ–Ω–¥–∞

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã:

### –®–∞–≥ 1: –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)

–ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Ç–æ–≤–∞—Ä–∞ –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –ª–æ–≥–∏:
```
Sticky bar element: <div id="stickyPurchaseBar">...
Product details element: <div class="product-details">...
```

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —ç–ª–µ–º–µ–Ω—Ç—ã

–í –∏–Ω—Å–ø–µ–∫—Ç–æ—Ä–µ –Ω–∞–π–¥–∏—Ç–µ:
```html
<div id="stickyPurchaseBar" class="sticky-purchase-bar" style="display:none">
```

–≠—Ç–æ—Ç —ç–ª–µ–º–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ –∫–æ–Ω—Ü–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–µ—Ä–µ–¥ –º–æ–¥–∞–ª—å–Ω—ã–º–∏ –æ–∫–Ω–∞–º–∏.

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∫—Ä–æ–ª–ª

1. –ü—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤–Ω–∏–∑ –Ω–∞ 300px
2. Sticky-–ø–∞–Ω–µ–ª—å –¥–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è —Å–Ω–∏–∑—É —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π
3. –ï—Å–ª–∏ –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –Ω–∞ –æ—à–∏–±–∫–∏

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –º–æ–¥–µ–ª–∏

–ù–∞–π–¥–∏—Ç–µ –≤ HTML:
```html
<div class="model-variants-section">
```

–ï—Å–ª–∏ —ç—Ç–æ–≥–æ –±–ª–æ–∫–∞ –Ω–µ—Ç, –∑–Ω–∞—á–∏—Ç:
- –£ —Ç–æ–≤–∞—Ä–∞ –Ω–µ—Ç `series_name` –ò
- –ù–µ—Ç –¥—Ä—É–≥–∏—Ö —Ç–æ–≤–∞—Ä–æ–≤ —Ç–æ–≥–æ –∂–µ –±—Ä–µ–Ω–¥–∞ –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

---

## üõ†Ô∏è –ë—ã—Å—Ç—Ä–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:

### –ï—Å–ª–∏ sticky-–ø–∞–Ω–µ–ª—å –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

**–í–∞—Ä–∏–∞–Ω—Ç 1: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–≥—Ä—É–∑–∫—É JS**

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
```
http://–≤–∞—à-–¥–æ–º–µ–Ω/web/js/sticky-bar.js
```

–î–æ–ª–∂–µ–Ω –∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è —Ñ–∞–π–ª —Å –∫–æ–¥–æ–º.

**–í–∞—Ä–∏–∞–Ω—Ç 2: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ CSS**

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
```
http://–≤–∞—à-–¥–æ–º–µ–Ω/web/css/product-enhancements.css
```

–î–æ–ª–∂–µ–Ω –∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è —Ñ–∞–π–ª —Å–æ —Å—Ç–∏–ª—è–º–∏.

**–í–∞—Ä–∏–∞–Ω—Ç 3: –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞**

```bash
# –í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
cd /Users/user/CascadeProjects/splitwise
rm -rf runtime/cache/*
```

–ó–∞—Ç–µ–º –æ–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤ –±—Ä–∞—É–∑–µ—Ä–µ —Å Ctrl+Shift+R (–∏–ª–∏ Cmd+Shift+R –Ω–∞ Mac).

---

### –ï—Å–ª–∏ –≤–∞—Ä–∏–∞–Ω—Ç—ã –º–æ–¥–µ–ª–∏ –Ω–µ –≤–∏–¥–Ω—ã:

**–ü—Ä–æ–≤–µ—Ä–∫–∞ 1: –ï—Å—Ç—å –ª–∏ series_name?**

–í –∞–¥–º–∏–Ω–∫–µ –æ—Ç–∫—Ä–æ–π—Ç–µ —Ç–æ–≤–∞—Ä –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–ª–µ "–°–µ—Ä–∏—è —Ç–æ–≤–∞—Ä–∞" (series_name).

**–ü—Ä–æ–≤–µ—Ä–∫–∞ 2: –ï—Å—Ç—å –ª–∏ –¥—Ä—É–≥–∏–µ —Ç–æ–≤–∞—Ä—ã?**

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª–∏ PHP:
```php
$product = \app\models\Product::findOne(ID_–¢–û–í–ê–†–ê);
echo "Series: " . $product->series_name . "\n";
echo "Brand ID: " . $product->brand_id . "\n";
echo "Category ID: " . $product->category_id . "\n";

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
$variants = \app\models\Product::find()
    ->where([
        'brand_id' => $product->brand_id,
        'category_id' => $product->category_id,
        'is_active' => 1
    ])
    ->andWhere(['!=', 'id', $product->id])
    ->count();
    
echo "–ù–∞–π–¥–µ–Ω–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤: " . $variants;
```

---

## üöÄ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ (–µ—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–ª–æ):

### –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π sticky-bar (–±–µ–∑ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ JS):

–î–æ–±–∞–≤—å—Ç–µ –≤ –∫–æ–Ω–µ—Ü `<script>` —Å–µ–∫—Ü–∏–∏ –≤ `product.php`:

```javascript
// –ü—Ä–æ—Å—Ç–æ–π sticky bar
(function() {
    const stickyBar = document.getElementById('stickyPurchaseBar');
    if (!stickyBar) return;
    
    window.addEventListener('scroll', function() {
        if (window.pageYOffset > 300) {
            stickyBar.style.display = 'flex';
            setTimeout(() => stickyBar.classList.add('visible'), 10);
        } else {
            stickyBar.classList.remove('visible');
            setTimeout(() => stickyBar.style.display = 'none', 300);
        }
    });
})();
```

### –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π –ø–æ–∫–∞–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤:

–ó–∞–º–µ–Ω–∏—Ç–µ —É—Å–ª–æ–≤–∏–µ –≤ `product.php`:

```php
// –ë—ã–ª–æ:
if (!empty($modelVariants)):

// –°—Ç–∞–ª–æ (–¥–ª—è —Ç–µ—Å—Ç–∞):
if (true): // –í—Å–µ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –±–ª–æ–∫ –¥–ª—è —Ç–µ—Å—Ç–∞
    if (empty($modelVariants)) {
        // –ï—Å–ª–∏ –Ω–µ—Ç –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤, –±–µ—Ä–µ–º –ª—é–±—ã–µ —Ç–æ–≤–∞—Ä—ã
        $modelVariants = \app\models\Product::find()
            ->where(['is_active' => 1])
            ->andWhere(['!=', 'id', $product->id])
            ->limit(8)
            ->orderBy('RAND()')
            ->all();
    }
```

---

## üìû –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

1. **–û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Ç–æ–≤–∞—Ä–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ**
2. **–ù–∞–∂–º–∏—Ç–µ F12** (–æ—Ç–∫—Ä–æ–µ—Ç—Å—è –∫–æ–Ω—Å–æ–ª—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞)
3. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É Console**
4. **–û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É** (Ctrl+Shift+R)
5. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏** (–¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –æ sticky bar)
6. **–ü—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ –≤–Ω–∏–∑** –Ω–∞ 300px
7. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –ø–æ—è–≤–∏–ª–∞—Å—å –ª–∏ –ø–∞–Ω–µ–ª—å —Å–Ω–∏–∑—É**

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –æ—Å—Ç–∞–µ—Ç—Å—è, –ø—Ä–∏—à–ª–∏—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç –∫–æ–Ω—Å–æ–ª–∏ —Å –æ—à–∏–±–∫–∞–º–∏.

---

**–§–∞–π–ª—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:**
- `/web/js/sticky-bar.js` ‚Äî –ª–æ–≥–∏–∫–∞
- `/web/css/product-enhancements.css` ‚Äî —Å—Ç–∏–ª–∏
- `/views/catalog/product.php` ‚Äî –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
