# üí∞ –ë—ã—Å—Ç—Ä–∞—è —à–ø–∞—Ä–≥–∞–ª–∫–∞ –ø–æ —Ü–µ–Ω–∞–º

## –ê–≤—Ç–æ–º–∞—Ç–∏–∫–∞ –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ

‚úÖ **–ü—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ —Ü–µ–Ω—ã –∫–∞–ª—å–∫—É–ª–∏—Ä—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!**

```bash
php yii poizon-import/run                      # API –∏–º–ø–æ—Ä—Ç
php yii poizon-import/from-file file.json      # –ò–∑ —Ñ–∞–π–ª–∞
```

–ö–∞–∂–¥—ã–π —Ä–∞–∑–º–µ—Ä –ø–æ–ª—É—á–∞–µ—Ç `price_byn` —Å –æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ–º –¥–æ xx9.

---

## –ü–µ—Ä–µ—Å—á–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ü–µ–Ω

–ï—Å–ª–∏ –∏–∑–º–µ–Ω–∏–ª—Å—è –∫—É—Ä—Å –∏–ª–∏ –Ω—É–∂–Ω–æ –æ–∫—Ä—É–≥–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ —Ü–µ–Ω—ã:

```bash
php yii poizon-import/update-prices
```

**–ß—Ç–æ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è:**
- –¶–µ–Ω—ã —Ç–æ–≤–∞—Ä–æ–≤ (`product.price`)
- –¶–µ–Ω—ã —Ä–∞–∑–º–µ—Ä–æ–≤ (`product_size.price_byn`)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
454.21 ‚Üí 449 BYN ‚úÖ
523.36 ‚Üí 519 BYN ‚úÖ
661.66 ‚Üí 659 BYN ‚úÖ
```

---

## –§–æ—Ä–º—É–ª–∞

```
1. –ë–∞–∑–æ–≤–∞—è —Ü–µ–Ω–∞ = (price_cny √ó 0.45 √ó 1.5) + 40 BYN
2. –û–∫—Ä—É–≥–ª–µ–Ω–∏–µ –¥–æ xx9 (–ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–µ —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ)
```

**–ü—Ä–∏–º–µ—Ä—ã:**
| CNY  | –ë–∞–∑–æ–≤–∞—è —Ü–µ–Ω–∞ | –§–∏–Ω–∞–ª—å–Ω–∞—è (xx9) |
|------|-------------|-----------------|
| 599  | 454.21      | **449** BYN     |
| 699  | 523.36      | **519** BYN     |
| 899  | 661.66      | **659** BYN     |
| 999  | 730.81      | **729** BYN     |
| 1799 | 1284.01     | **1279** BYN    |

---

## –ò–∑–º–µ–Ω–∏—Ç—å –∫—É—Ä—Å

–í `/config/web.php`:

```php
'currency' => [
    'class' => 'app\components\CurrencyService',
    'cnyToBynRate' => 0.47,  // –ò–∑–º–µ–Ω–∏—Ç–µ –∑–¥–µ—Å—å
],
```

–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø–µ—Ä–µ—Å—á–µ—Ç:
```bash
php yii poizon-import/update-prices
```

---

## –ò–∑–º–µ–Ω–∏—Ç—å —Ñ–æ—Ä–º—É–ª—É

–í `/components/CurrencyService.php` ‚Üí –º–µ—Ç–æ–¥ `calculatePoizonPriceByn()`:

```php
public function calculatePoizonPriceByn($priceCny, $markup = 1.5, $fixedFee = 40)
{
    // –ò–∑–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
    // $markup = 1.7     ‚Üí –Ω–∞—Ü–µ–Ω–∫–∞ 70%
    // $fixedFee = 50    ‚Üí –∫–æ–º–∏—Å—Å–∏—è 50 BYN
}
```

---

## FAQ

**Q: –ü–æ—á–µ–º—É —Ü–µ–Ω—ã –æ–∫—Ä—É–≥–ª—è—é—Ç—Å—è –≤–Ω–∏–∑, –∞ –Ω–µ –≤–≤–µ—Ä—Ö?**  
A: –ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–µ —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ - 449 –ø—Ä–∏–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–µ–µ, —á–µ–º 450.

**Q: –ú–æ–∂–Ω–æ –ª–∏ –æ—Ç–∫–ª—é—á–∏—Ç—å –æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ –¥–æ xx9?**  
A: –î–∞, –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ `roundToPrettyPrice()` –≤ `calculatePoizonPriceByn()`.

**Q: –ß—Ç–æ –¥–µ–ª–∞—Ç—å –µ—Å–ª–∏ —Ü–µ–Ω–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "40 BYN"?**  
A: –£ —Ä–∞–∑–º–µ—Ä–∞ –Ω–µ—Ç `price_cny` - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–∞–Ω–Ω—ã–µ –∏–º–ø–æ—Ä—Ç–∞.

---

## –ë—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ò–º–ø–æ—Ä—Ç + –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–∞–ª—å–∫—É–ª—è—Ü–∏—è
php yii poizon-import/run

# –ü–µ—Ä–µ—Å—á–µ—Ç –≤—Å–µ—Ö —Ü–µ–Ω (—Å –æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ–º –¥–æ xx9)
php yii poizon-import/update-prices

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
php yii poizon-import/logs

# –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞ –∫—É—Ä—Å–∞
php yii cache/flush
```

---

üìö **–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** `PRICE_UPDATE_GUIDE.md`
