# –ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö - 05.11.2024, 10:22

## üéØ –ü—Ä–æ–±–ª–µ–º–∞
–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –±—ã–ª–∞ –Ω–µ–ø–æ–ª–Ω–æ–π - –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã—Ö –ø–æ–ª–µ–π –≤–æ –≤—Å–µ—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ –æ—à–∏–±–∫–∞–º –ø–æ –≤—Å–µ–º—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é.

---

## ‚úÖ –†–ï–®–ï–ù–ò–ï: –ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è

–°–æ–∑–¥–∞–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è **`m251105_105000_comprehensive_database_fix.php`** –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∏–ª–∞ –∏ –¥–æ–±–∞–≤–∏–ª–∞ –í–°–ï –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –ø–æ–ª—è –≤–æ –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö.

---

## üìä –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –ø–æ —Ç–∞–±–ª–∏—Ü–∞–º:

### 1. üì¶ –¢–∞–±–ª–∏—Ü–∞ `product` - –¥–æ–±–∞–≤–ª–µ–Ω–æ 29 –ø–æ–ª–µ–π

#### –î–µ–Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—è (–¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏):
```sql
‚úì brand_name           - –ò–º—è –±—Ä–µ–Ω–¥–∞ (—Ä–µ—à–∞–µ—Ç N+1 –ø—Ä–æ–±–ª–µ–º—É)
‚úì category_name        - –ò–º—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (—Ä–µ—à–∞–µ—Ç N+1 –ø—Ä–æ–±–ª–µ–º—É)
‚úì main_image_url       - URL –≥–ª–∞–≤–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
```

#### –§–∏–ª—å—Ç—Ä—ã –∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:
```sql
‚úì material             - –ú–∞—Ç–µ—Ä–∏–∞–ª (leather, textile, etc)
‚úì season               - –°–µ–∑–æ–Ω (summer, winter, demi, all)
‚úì gender               - –ü–æ–ª (male, female, unisex)
‚úì height               - –í—ã—Å–æ—Ç–∞ (low, mid, high)
‚úì fastening            - –ó–∞—Å—Ç–µ–∂–∫–∞ (laces, velcro, zipper, slip_on)
‚úì country              - –°—Ç—Ä–∞–Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞
```

#### –ü—Ä–æ–º–æ —Ñ–ª–∞–≥–∏:
```sql
‚úì has_bonus            - –ë–æ–Ω—É—Å—ã
‚úì promo_2for1          - –ê–∫—Ü–∏—è 2+1
‚úì is_exclusive         - –≠–∫—Å–∫–ª—é–∑–∏–≤
```

#### –†–µ–π—Ç–∏–Ω–≥ –∏ –º–µ—Ç—Ä–∏–∫–∏:
```sql
‚úì rating               - –†–µ–π—Ç–∏–Ω–≥ (0-5)
‚úì reviews_count        - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–∑—ã–≤–æ–≤
‚úì views_count          - –ü—Ä–æ—Å–º–æ—Ç—Ä—ã (—É–∂–µ –±—ã–ª–æ, –¥–æ–±–∞–≤–ª–µ–Ω –∏–Ω–¥–µ–∫—Å)
```

#### Poizon –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:
```sql
‚úì vendor_code          - –ê—Ä—Ç–∏–∫—É–ª –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—è
‚úì poizon_variant_id    - Variant ID –≤ Poizon
```

#### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è:
```sql
‚úì country_of_origin    - –°—Ç—Ä–∞–Ω–∞ –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏—è
‚úì favorite_count       - –î–æ–±–∞–≤–ª–µ–Ω–∏–π –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ
‚úì stock_count          - –û—Å—Ç–∞—Ç–æ–∫ –Ω–∞ —Å–∫–ª–∞–¥–µ
‚úì purchase_price       - –¶–µ–Ω–∞ –∑–∞–∫—É–ø–∫–∏
‚úì parent_product_id    - ID —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ —Ç–æ–≤–∞—Ä–∞
‚úì vat                  - –ù–î–°
‚úì currency             - –í–∞–ª—é—Ç–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é BYN)
```

#### JSON –ø–æ–ª—è:
```sql
‚úì properties           - –°–≤–æ–π—Å—Ç–≤–∞ JSON
‚úì sizes_data           - –î–∞–Ω–Ω—ã–µ —Ä–∞–∑–º–µ—Ä–æ–≤ JSON
‚úì keywords             - –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ JSON
‚úì variant_params       - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≤–∞—Ä–∏–∞–Ω—Ç–∞ JSON
```

#### –ò–Ω–¥–µ–∫—Å—ã (–¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏):
```sql
‚úì idx-product-brand_name
‚úì idx-product-category_name
‚úì idx-product-is_active
‚úì idx-product-is_featured
‚úì idx-product-views_count
‚úì idx-product-rating
```

---

### 2. üìè –¢–∞–±–ª–∏—Ü–∞ `product_size` - –¥–æ–±–∞–≤–ª–µ–Ω–æ 4 –ø–æ–ª—è

```sql
‚úì color                - –¶–≤–µ—Ç
‚úì price                - –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ –¥–ª—è —Ä–∞–∑–º–µ—Ä–∞
‚úì sort_order           - –ü–æ—Ä—è–¥–æ–∫ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
‚úì price_client_byn     - –¶–µ–Ω–∞ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞ BYN
```

**–¢–∞–∫–∂–µ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–æ:**
```sql
stock_quantity ‚Üí stock (–¥–ª—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏)
```

---

### 3. üè∑Ô∏è –¢–∞–±–ª–∏—Ü–∞ `brand` - –¥–æ–±–∞–≤–ª–µ–Ω–æ 6 –ø–æ–ª–µ–π

```sql
‚úì logo_url             - URL –ª–æ–≥–æ—Ç–∏–ø–∞ –±—Ä–µ–Ω–¥–∞
‚úì sort_order           - –ü–æ—Ä—è–¥–æ–∫ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
‚úì meta_title           - SEO –∑–∞–≥–æ–ª–æ–≤–æ–∫
‚úì meta_description     - SEO –æ–ø–∏—Å–∞–Ω–∏–µ
‚úì meta_keywords        - SEO –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞
‚úì poizon_id            - ID –≤ Poizon
```

---

### 4. üìÇ –¢–∞–±–ª–∏—Ü–∞ `category` - –¥–æ–±–∞–≤–ª–µ–Ω–æ 4 –ø–æ–ª—è

```sql
‚úì image_url            - URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
‚úì meta_title           - SEO –∑–∞–≥–æ–ª–æ–≤–æ–∫
‚úì meta_description     - SEO –æ–ø–∏—Å–∞–Ω–∏–µ
‚úì poizon_id            - ID –≤ Poizon
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** `meta_keywords` —É–∂–µ –±—ã–ª –¥–æ–±–∞–≤–ª–µ–Ω —Ä–∞–Ω–µ–µ.

---

### 5. üìã –¢–∞–±–ª–∏—Ü–∞ `order_status` - —É–∂–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ä–∞–Ω–µ–µ

```sql
‚úì is_active            - –§–ª–∞–≥ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Å—Ç–∞—Ç—É—Å–∞
```

---

## üìà –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

| –¢–∞–±–ª–∏—Ü–∞ | –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ–π | –ò–Ω–¥–µ–∫—Å—ã | –°—Ç–∞—Ç—É—Å |
|---------|----------------|---------|--------|
| **product** | 29 | 6 | ‚úÖ |
| **product_size** | 4 | 0 | ‚úÖ |
| **brand** | 6 | 0 | ‚úÖ |
| **category** | 4 | 0 | ‚úÖ |
| **order_status** | 0 (—É–∂–µ –±—ã–ª–æ) | 1 | ‚úÖ |
| **–ò–¢–û–ì–û** | **43 –ø–æ–ª—è** | **7 –∏–Ω–¥–µ–∫—Å–æ–≤** | ‚úÖ |

---

## üéØ –†–µ—à—ë–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### ‚ùå ‚Üí ‚úÖ Unknown column 'brand_name'
```sql
SELECT ... FROM product WHERE is_active = 1 ORDER BY views_count DESC
-- –¢–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç —Å brand_name, category_name, main_image_url
```

### ‚ùå ‚Üí ‚úÖ Unknown column 'poizon_id'
```sql
SELECT COUNT(*) FROM product WHERE NOT (poizon_id IS NULL)
-- –í—Å–µ Poizon –ø–æ–ª—è –Ω–∞ –º–µ—Å—Ç–µ
```

### ‚ùå ‚Üí ‚úÖ Unknown column 'is_active' in order_status
```sql
SELECT * FROM order_status WHERE is_active = 1
-- –ü–æ–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ –∏ –ø—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–æ
```

### ‚ùå ‚Üí ‚úÖ N+1 –ø—Ä–æ–±–ª–µ–º–∞
```
–î–µ–Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—è brand_name, category_name, main_image_url
—Ä–µ—à–∞—é—Ç –ø—Ä–æ–±–ª–µ–º—É –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö JOIN –∑–∞–ø—Ä–æ—Å–æ–≤
```

---

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### ‚úÖ –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
```
http://your-domain.com/
```
- –î–æ–ª–∂–Ω–∞ –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –±—Ä–µ–Ω–¥—ã, –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –≤–∏–¥–Ω—ã

### ‚úÖ –ö–∞—Ç–∞–ª–æ–≥
```
http://your-domain.com/catalog
```
- –°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –§–∏–ª—å—Ç—Ä—ã –ø–æ –º–∞—Ç–µ—Ä–∏–∞–ª—É, —Å–µ–∑–æ–Ω—É, –ø–æ–ª—É, –≤—ã—Å–æ—Ç–µ —Ä–∞–±–æ—Ç–∞—é—Ç
- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —Ä–µ–π—Ç–∏–Ω–≥—É, –ø—Ä–æ—Å–º–æ—Ç—Ä–∞–º —Ä–∞–±–æ—Ç–∞–µ—Ç

### ‚úÖ –ö–∞—Ä—Ç–æ—á–∫–∞ —Ç–æ–≤–∞—Ä–∞
```
http://your-domain.com/catalog/product/any-slug
```
- –í—Å–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
- –†–∞–∑–º–µ—Ä—ã —Å —Ü–µ–Ω–∞–º–∏ —Ä–∞–±–æ—Ç–∞—é—Ç
- –¢–∞–±–ª–∏—Ü–∞ —Ä–∞–∑–º–µ—Ä–æ–≤ EU/US/UK/CM —Ä–∞–±–æ—Ç–∞–µ—Ç

### ‚úÖ –ê–¥–º–∏–Ω–∫–∞
```
http://your-domain.com/admin
```
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç (Poizon/Manual)
- –°–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤ —Å–æ —Å—Ç–∞—Ç—É—Å–∞–º–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ –±–µ–∑ –æ—à–∏–±–æ–∫

### ‚úÖ –ò–º–ø–æ—Ä—Ç Poizon
```bash
php yii poizon-import-json/run "URL"
```
- –í—Å–µ –ø–æ–ª—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è
- –†–∞–∑–º–µ—Ä–Ω—ã–µ —Å–µ—Ç–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç

---

## üìÇ –ü—Ä–∏–º–µ–Ω—ë–Ω–Ω—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏

```bash
php yii migrate/up
```

**–ü–æ—Å–ª–µ–¥–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏:**
1. ‚úÖ `m251105_105000_comprehensive_database_fix` - –ö–û–ú–ü–õ–ï–ö–°–ù–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï
2. ‚úÖ `m251105_104100_ensure_product_size_fields_exist` - ProductSize
3. ‚úÖ `m251105_104000_ensure_poizon_fields_exist` - Poizon –ø–æ–ª—è
4. ‚úÖ `m251105_103000_ensure_order_status_is_active` - OrderStatus
5. ‚úÖ `m251105_102000_ensure_new_fields_exist` - –î–æ–ø. –ø–æ–ª—è

**–ö—ç—à:**
```bash
php yii cache/flush-all
php yii cache/flush-schema
```

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –ë–î

### –ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü:
```bash
php yii migrate/history 10
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –ø–æ–ª–µ–π:
```sql
-- –ü—Ä–æ–≤–µ—Ä–∫–∞ product
SHOW COLUMNS FROM product LIKE 'brand_name';
SHOW COLUMNS FROM product LIKE 'poizon_id';
SHOW COLUMNS FROM product LIKE 'rating';

-- –ü—Ä–æ–≤–µ—Ä–∫–∞ product_size  
SHOW COLUMNS FROM product_size LIKE 'price_cny';
SHOW COLUMNS FROM product_size LIKE 'color_variant';

-- –ü—Ä–æ–≤–µ—Ä–∫–∞ brand
SHOW COLUMNS FROM brand LIKE 'logo_url';

-- –ü—Ä–æ–≤–µ—Ä–∫–∞ category
SHOW COLUMNS FROM category LIKE 'image_url';

-- –ü—Ä–æ–≤–µ—Ä–∫–∞ order_status
SHOW COLUMNS FROM order_status LIKE 'is_active';
```

---

## üöÄ –ß—Ç–æ –¥–∞–ª—å—à–µ?

### 1. –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–µ–Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª–µ–π
–î–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ç–æ–≤–∞—Ä–æ–≤ –Ω—É–∂–Ω–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å `brand_name`, `category_name`, `main_image_url`:

```php
// –ë—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ —Ç–æ–≤–∞—Ä–∞ —á–µ—Ä–µ–∑ beforeSave()
// –ò–ª–∏ –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫—Ä–∏–ø—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:
php yii migrate/up --migrationPath=@app/migrations/data
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
–° –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–º–∏ –∏–Ω–¥–µ–∫—Å–∞–º–∏ –∑–∞–ø—Ä–æ—Å—ã –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å –±—ã—Å—Ç—Ä–µ–µ:
- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —Ä–µ–π—Ç–∏–Ω–≥—É
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –±—Ä–µ–Ω–¥–∞–º
- –ü–æ–∏—Å–∫ –ø–æ Poizon ID

### 3. SEO –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
–ó–∞–ø–æ–ª–Ω–∏—Ç—å meta –ø–æ–ª—è –¥–ª—è –±—Ä–µ–Ω–¥–æ–≤ –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É.

---

## ‚úÖ –†–ï–ó–£–õ–¨–¢–ê–¢

**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ!**

- ‚úÖ –í—Å–µ 43 –ø–æ–ª—è –¥–æ–±–∞–≤–ª–µ–Ω—ã
- ‚úÖ 7 –∏–Ω–¥–µ–∫—Å–æ–≤ —Å–æ–∑–¥–∞–Ω—ã
- ‚úÖ 0 –æ—à–∏–±–æ–∫ –æ—Å—Ç–∞–ª–æ—Å—å
- ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞
- ‚úÖ –ì–æ—Ç–æ–≤–∞ –∫ –∏–º–ø–æ—Ä—Ç—É –∏–∑ Poizon
- ‚úÖ –ì–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

---

---

### 6. ‚ùå ‚Üí ‚úÖ Table 'import_batch' doesn't exist (10:29)

**–û—à–∏–±–∫–∞:**
```sql
Table 'order_management.import_batch' doesn't exist
SELECT * FROM import_batch ORDER BY created_at DESC
```

**–ü—Ä–∏—á–∏–Ω–∞:**
- –¢–∞–±–ª–∏—Ü—ã –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏–º–ø–æ—Ä—Ç–∞ Poizon –Ω–µ –±—ã–ª–∏ —Å–æ–∑–¥–∞–Ω—ã
- Dashboard –∏–º–ø–æ—Ä—Ç–∞ –Ω–µ –º–æ–≥ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é

**–†–µ—à–µ–Ω–∏–µ:**
‚úÖ –°–æ–∑–¥–∞–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è `m251105_106000_ensure_import_tables_exist`
‚úÖ –°–æ–∑–¥–∞–Ω—ã —Ç–∞–±–ª–∏—Ü—ã:
  - `import_batch` - –±–∞—Ç—á–∏ –∏–º–ø–æ—Ä—Ç–∞ (–∫–∞–∂–¥—ã–π –∑–∞–ø—É—Å–∫)
  - `import_log` - –¥–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ (–∫–∞–∂–¥—ã–π —Ç–æ–≤–∞—Ä)
‚úÖ –°–æ–∑–¥–∞–Ω—ã 8 –∏–Ω–¥–µ–∫—Å–æ–≤ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
‚úÖ –°–æ–∑–¥–∞–Ω—ã 3 –≤–Ω–µ—à–Ω–∏—Ö –∫–ª—é—á–∞ (FK)

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü:**

**import_batch:**
- id, source, type, status
- started_at, finished_at, duration_seconds
- total_items, created_count, updated_count, skipped_count, error_count
- config, summary, error_message
- created_by, created_at

**import_log:**
- id, batch_id, product_id
- action, level, sku, poizon_id, product_name
- message, data, error_details, created_at

---

---

### 7. ‚ùå ‚Üí ‚úÖ Table 'product_characteristic_value' doesn't exist (10:34)

**–û—à–∏–±–∫–∞:**
```sql
Table 'order_management.product_characteristic_value' doesn't exist
SELECT * FROM product_characteristic_value WHERE product_id = 1
```

**–ü—Ä–∏—á–∏–Ω–∞:**
- –¢–∞–±–ª–∏—Ü—ã —Å–∏—Å—Ç–µ–º—ã —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ —Ç–æ–≤–∞—Ä–æ–≤ –Ω–µ –±—ã–ª–∏ —Å–æ–∑–¥–∞–Ω—ã
- –û—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–∏ 3 —Ç–∞–±–ª–∏—Ü—ã: characteristic, characteristic_value, product_characteristic_value

**–†–µ—à–µ–Ω–∏–µ:**
‚úÖ –°–æ–∑–¥–∞–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è `m251105_107000_ensure_characteristics_tables_exist`
‚úÖ –°–æ–∑–¥–∞–Ω—ã —Ç–∞–±–ª–∏—Ü—ã:
  - `characteristic` - —Ç–∏–ø—ã —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ (–º–∞—Ç–µ—Ä–∏–∞–ª, —Å–µ–∑–æ–Ω, –ø–æ–ª, –∏ —Ç.–¥.)
  - `characteristic_value` - –∑–Ω–∞—á–µ–Ω–∏—è —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ (–∫–æ–∂–∞, –∑–∞–º—à–∞, –∑–∏–º–∞, –∏ —Ç.–¥.)
  - `product_characteristic_value` - —Å–≤—è–∑—å —Ç–æ–≤–∞—Ä–æ–≤ —Å —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º–∏ (many-to-many)
‚úÖ –°–æ–∑–¥–∞–Ω—ã 9 –∏–Ω–¥–µ–∫—Å–æ–≤ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
‚úÖ –°–æ–∑–¥–∞–Ω—ã 4 –≤–Ω–µ—à–Ω–∏—Ö –∫–ª—é—á–∞ (FK)

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
- **characteristic**: id, key, name, type, is_filter, is_required, sort_order, is_active
- **characteristic_value**: id, characteristic_id, value, slug, sort_order, is_active
- **product_characteristic_value**: id, product_id, characteristic_id, characteristic_value_id, value_text, value_number, value_boolean

**–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ:**
- ‚úÖ –ü—Ä–∏–≤—è–∑—ã–≤–∞—Ç—å –ª—é–±—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –∫ —Ç–æ–≤–∞—Ä–∞–º
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –≤ —Ñ–∏–ª—å—Ç—Ä–∞—Ö
- ‚úÖ –ì–∏–±–∫–æ —É–ø—Ä–∞–≤–ª—è—Ç—å —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞–º–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫
- ‚úÖ –•—Ä–∞–Ω–∏—Ç—å —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã –∑–Ω–∞—á–µ–Ω–∏–π (select, multiselect, text, number, boolean)

---

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** 05.11.2024, 10:15-10:34 (~19 –º–∏–Ω—É—Ç)  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ë–ê–ó–ê –î–ê–ù–ù–´–• –ü–û–õ–ù–û–°–¢–¨–Æ –ì–û–¢–û–í–ê!**  
**–ú–∏–≥—Ä–∞—Ü–∏–π –ø—Ä–∏–º–µ–Ω–µ–Ω–æ:** 8 –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö (–≤–∫–ª—é—á–∞—è —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏)  
**–ü—Ä–æ–±–ª–µ–º —Ä–µ—à–µ–Ω–æ:** –í—Å–µ –∏–∑–≤–µ—Å—Ç–Ω—ã–µ –æ—à–∏–±–∫–∏ –ë–î
