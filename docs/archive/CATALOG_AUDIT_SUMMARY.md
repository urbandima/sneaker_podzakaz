# üîç –ê–£–î–ò–¢ –ö–ê–¢–ê–õ–û–ì–ê - –ö–†–ê–¢–ö–ò–ô –û–¢–ß–Å–¢

**–î–∞—Ç–∞**: 02.11.2025  
**–ü—Ä–æ–µ–∫—Ç**: –°–ù–ò–ö–ï–†–•–≠–î

---

## üìä –û–ë–©–ê–Ø –û–¶–ï–ù–ö–ê: 7.2/10

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
1. **–ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤**: 6.5/10 ‚ö†Ô∏è
2. **–£–º–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä**: 7/10 ‚ö†Ô∏è  
3. **–°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ç–æ–≤–∞—Ä–∞**: 8/10 ‚úÖ

**–°—Ç–∞—Ç—É—Å**: ‚ö†Ô∏è **–¢—Ä–µ–±—É–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥ –≤—ã—Å–æ–∫–∏–º–∏ –Ω–∞–≥—Ä—É–∑–∫–∞–º–∏**

---

## üî¥ –¢–û–ü-5 –ö–†–ò–¢–ò–ß–ï–°–ö–ò–• –ü–†–û–ë–õ–ï–ú

### 1. N+1 –ø—Ä–æ–±–ª–µ–º–∞ –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
**–ü—Ä–æ–±–ª–µ–º–∞**: 24 —Ç–æ–≤–∞—Ä–∞ = 25 SQL –∑–∞–ø—Ä–æ—Å–æ–≤  
**–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–∏—Ç—å `->with(['images'])`  
**–≠—Ñ—Ñ–µ–∫—Ç**: -92% –∑–∞–ø—Ä–æ—Å–æ–≤

### 2. –ù–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤  
**–ü—Ä–æ–±–ª–µ–º–∞**: getFiltersData() –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è 150ms –∫–∞–∂–¥—ã–π —Ä–∞–∑  
**–†–µ—à–µ–Ω–∏–µ**: `Yii::$app->cache->getOrSet()`  
**–≠—Ñ—Ñ–µ–∫—Ç**: 150ms ‚Üí 0ms

### 3. –ú–µ–¥–ª–µ–Ω–Ω—ã–π COUNT –¥–ª—è –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
**–ü—Ä–æ–±–ª–µ–º–∞**: COUNT(*) —Å JOIN = 100-200ms  
**–†–µ—à–µ–Ω–∏–µ**: –ö—ç—à–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–∞ 5 –º–∏–Ω  
**–≠—Ñ—Ñ–µ–∫—Ç**: -95% –≤—Ä–µ–º—è

### 4. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤ –ë–î
**–ü—Ä–æ–±–ª–µ–º–∞**: Table scan –≤–º–µ—Å—Ç–æ Index scan  
**–†–µ—à–µ–Ω–∏–µ**: –°–æ–∑–¥–∞—Ç—å –∏–Ω–¥–µ–∫—Å—ã –Ω–∞ `is_active`, `brand_id`, `category_id`, `price`  
**–≠—Ñ—Ñ–µ–∫—Ç**: -95% –≤—Ä–µ–º—è –∑–∞–ø—Ä–æ—Å–æ–≤

### 5. –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤
**–ü—Ä–æ–±–ª–µ–º–∞**: 150 —Å—Ç—Ä–æ–∫ –ø–æ–≤—Ç–æ—Ä—è—é—â–µ–≥–æ—Å—è –∫–æ–¥–∞  
**–†–µ—à–µ–Ω–∏–µ**: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π –º–∞—Å—Å–∏–≤ + —Ü–∏–∫–ª  
**–≠—Ñ—Ñ–µ–∫—Ç**: -67% –∫–æ–¥–∞

---

## ‚úÖ –ß–¢–û –†–ê–ë–û–¢–ê–ï–¢ –•–û–†–û–®–û

1. ‚úÖ **SEO**: Schema.org, Open Graph
2. ‚úÖ **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥–∞**: MVC, —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏
3. ‚úÖ **AJAX —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è**: –ë–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏
4. ‚úÖ **Eager loading**: brand, category
5. ‚úÖ **–£–º–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä**: –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –ø–æ–¥—Å—á—ë—Ç

---

## üöÄ –ë–´–°–¢–†–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø (30 –º–∏–Ω—É—Ç)

### 1. Eager Loading (5 –º–∏–Ω)
```php
// CatalogController::actionIndex()
$query = Product::find()
    ->with([
        'brand', 'category',
        'images' => function($q) {
            $q->where(['is_main' => 1])->limit(1);
        }
    ]);
```

### 2. –ò–Ω–¥–µ–∫—Å—ã –ë–î (10 –º–∏–Ω)
```sql
CREATE INDEX idx_product_filter ON product(is_active, brand_id, category_id, price);
CREATE INDEX idx_product_created ON product(created_at);
CREATE INDEX idx_product_name ON product(name);
```

### 3. –ö—ç—à —Ñ–∏–ª—å—Ç—Ä–æ–≤ (15 –º–∏–Ω)
```php
protected function getFiltersData() {
    $cacheKey = 'filters_' . md5(serialize(Yii::$app->request->queryParams));
    return Yii::$app->cache->getOrSet($cacheKey, function() {
        // —Ç–µ–∫—É—â–∞—è –ª–æ–≥–∏–∫–∞
    }, 1800);
}
```

**–≠—Ñ—Ñ–µ–∫—Ç**: –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å +200%

---

## üìà –û–ñ–ò–î–ê–ï–ú–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´

### –î–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
- –ó–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Ç–∞–ª–æ–≥–∞: **2-3 —Å–µ–∫**
- SQL –∑–∞–ø—Ä–æ—Å–æ–≤: **25-30**
- –í—Ä–µ–º—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏: **150-250ms**

### –ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
- –ó–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Ç–∞–ª–æ–≥–∞: **<1 —Å–µ–∫** ‚úÖ
- SQL –∑–∞–ø—Ä–æ—Å–æ–≤: **2-3** ‚úÖ
- –í—Ä–µ–º—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏: **<50ms** ‚úÖ

**–£–ª—É—á—à–µ–Ω–∏–µ**: **+200% –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**

---

## üí∞ –í–õ–ò–Ø–ù–ò–ï –ù–ê –ë–ò–ó–ù–ï–°

### –¢–µ–∫—É—â–∏–µ –ø–æ—Ç–µ—Ä–∏:
- –ú–µ–¥–ª–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞: **-15% –∫–æ–Ω–≤–µ—Ä—Å–∏—è**
- –î–æ–ª–≥–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è: **-10% –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**
- –ü–ª–æ—Ö–æ–π UX: **+20% bounce rate**

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
- –ë—ã—Å—Ç—Ä–∞—è –∑–∞–≥—Ä—É–∑–∫–∞: **+15% –∫–æ–Ω–≤–µ—Ä—Å–∏—è**
- –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã: **+10% –ø—Ä–æ–¥–∞–∂**
- –£–ª—É—á—à–µ–Ω–Ω—ã–π UX: **-20% bounce rate**

**ROI**: **+25% –≤—ã—Ä—É—á–∫–∞**

---

## üìã –ü–õ–ê–ù –î–ï–ô–°–¢–í–ò–ô

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1 (–°–µ–≥–æ–¥–Ω—è - 2 —á–∞—Å–∞):
1. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å eager loading images
2. ‚úÖ –°–æ–∑–¥–∞—Ç—å –∏–Ω–¥–µ–∫—Å—ã –ë–î
3. ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2 (–ó–∞–≤—Ç—Ä–∞ - 4 —á–∞—Å–∞):
4. ‚úÖ –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ applyFilters()
5. ‚úÖ –ö—ç—à –ø–æ—Ö–æ–∂–∏—Ö —Ç–æ–≤–∞—Ä–æ–≤
6. ‚úÖ History API –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–æ–≤

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3 (–ù–∞ –Ω–µ–¥–µ–ª–µ):
7. ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ SQL
8. ‚úÖ APM –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
9. ‚úÖ –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## üéØ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

**–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å**: –ö–æ–¥ —Ö–æ—Ä–æ—à–∏–π, –Ω–æ **–Ω–µ –≥–æ—Ç–æ–≤ –∫ –≤—ã—Å–æ–∫–∏–º –Ω–∞–≥—Ä—É–∑–∫–∞–º**

**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å**: HIGH - —Ç—Ä–µ–±—É–µ—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

**–í—Ä–µ–º—è –Ω–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**: 2-4 —á–∞—Å–∞ –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: +200% –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, +25% –≤—ã—Ä—É—á–∫–∞

---

**–ü–æ–¥—Ä–æ–±–Ω—ã–π –æ—Ç—á—ë—Ç**: `CATALOG_PRODUCTION_AUDIT.md` (–ø–æ–ª–Ω–∞—è –≤–µ—Ä—Å–∏—è —Å –∫–æ–¥–æ–º)
