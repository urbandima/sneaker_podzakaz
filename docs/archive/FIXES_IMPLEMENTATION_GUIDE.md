# üîß –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –≤–Ω–µ–¥—Ä–µ–Ω–∏—é –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –∏–º–ø–æ—Ä—Ç–∞

**–î–∞—Ç–∞:** 06.11.2025, 10:00  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é

---

## üìã –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### ‚úÖ **–ü—Ä–æ–±–ª–µ–º–∞ 1: –ê—Ä—Ç–∏–∫—É–ª—ã –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ (`children[].vendorCode`)**

**–ë—ã–ª–æ:** –ê—Ä—Ç–∏–∫—É–ª—ã –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–ª–∏—Å—å –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ  
**–°—Ç–∞–ª–æ:** –ê—Ä—Ç–∏–∫—É–ª—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ø–æ–ª–µ `product_size.variant_vendor_code`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è: `m251106_070000_add_variant_fields_to_product_size.php`
- ‚úÖ –ú–æ–¥–µ–ª—å: `models/ProductSize.php` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è –∏ –ø—Ä–∞–≤–∏–ª–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- ‚úÖ –ò–º–ø–æ—Ä—Ç: `commands/PoizonImportJsonController.php:850` - –¥–æ–±–∞–≤–ª–µ–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
- ‚úÖ –ê–¥–º–∏–Ω–∫–∞: `views/admin/view-product.php:465,510-515` - –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ —Ç–∞–±–ª–∏—Ü–µ —Ä–∞–∑–º–µ—Ä–æ–≤

---

### ‚úÖ **–ü—Ä–æ–±–ª–µ–º–∞ 2: –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ (`children[].images[]`)**

**–ë—ã–ª–æ:** –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Ñ–æ—Ç–æ –∫–∞–∂–¥–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞/—Ü–≤–µ—Ç–∞ —Ç–µ—Ä—è–ª–∏—Å—å  
**–°—Ç–∞–ª–æ:** –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ –≤ `product_size.images_json`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è: `m251106_070000_add_variant_fields_to_product_size.php`
- ‚úÖ –ú–æ–¥–µ–ª—å: `models/ProductSize.php` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è –∏ –ø—Ä–∞–≤–∏–ª–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- ‚úÖ –ò–º–ø–æ—Ä—Ç: `commands/PoizonImportJsonController.php:851-853` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –º–∞—Å—Å–∏–≤–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- ‚úÖ –ê–¥–º–∏–Ω–∫–∞: `views/admin/view-product.php:466,517-529` - –∫–Ω–æ–ø–∫–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ + –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
- ‚úÖ –ê–¥–º–∏–Ω–∫–∞: `views/admin/view-product.php:816-859` - –º–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ –≥–∞–ª–µ—Ä–µ–∏

---

### ‚úÖ **–ü—Ä–æ–±–ª–µ–º–∞ 3: –ü–æ—Ö–æ–∂–∏–µ —Ç–æ–≤–∞—Ä—ã (`relatedProducts[]`)**

**–ë—ã–ª–æ:** –î–∞–Ω–Ω—ã–µ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–ª–∏—Å—å, –Ω–æ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∏—Å—å –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ  
**–°—Ç–∞–ª–æ:** –ë–ª–æ–∫ –ø–æ—Ö–æ–∂–∏—Ö —Ç–æ–≤–∞—Ä–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Ç–æ–≤–∞—Ä–∞ —Å 3 —É—Ä–æ–≤–Ω—è–º–∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –ö–ª–∏–µ–Ω—Ç: `views/catalog/product.php:583-644` - –ª–æ–≥–∏–∫–∞ –≤—ã–±–æ—Ä–∞ –ø–æ—Ö–æ–∂–∏—Ö —Ç–æ–≤–∞—Ä–æ–≤
  1. –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –ò–∑ `related_products_json` (Poizon API)
  2. –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: –ü–æ `series_name` (—Ç–∞ –∂–µ –º–æ–¥–µ–ª—å)
  3. –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: –ü–æ `brand_id` + `category_id` (—Ç–æ—Ç –∂–µ –±—Ä–µ–Ω–¥/–∫–∞—Ç–µ–≥–æ—Ä–∏—è)

---

## üöÄ –®–∞–≥–∏ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è

### 1Ô∏è‚É£ **–ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é** (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ!)

```bash
cd /Users/user/CascadeProjects/splitwise
php yii migrate
```

**–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç:**
- ‚úÖ –î–æ–±–∞–≤—è—Ç—Å—è –ø–æ–ª—è `variant_vendor_code` (VARCHAR 100) –∏ `images_json` (TEXT) –≤ —Ç–∞–±–ª–∏—Ü—É `product_size`
- ‚úÖ –°–æ–∑–¥–∞—Å—Ç—Å—è –∏–Ω–¥–µ–∫—Å `idx_variant_vendor_code` –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
Yii Migration Tool (based on Yii v2.x)

Creating migration history table "migration"...Done.
Total 1 new migration to be applied:
    m251106_070000_add_variant_fields_to_product_size

Apply the above migration? (yes|no) [no]:yes
*** applying m251106_070000_add_variant_fields_to_product_size
‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è variant_vendor_code –∏ images_json –≤ product_size
    > create index idx_variant_vendor_code on product_size (variant_vendor_code) ... done (time: 0.123s)
*** applied m251106_070000_add_variant_fields_to_product_size (time: 0.245s)

1 migration was applied.
```

---

### 2Ô∏è‚É£ **–ü–µ—Ä–µ–∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–≤–∞—Ä—ã** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –ò–º–ø–æ—Ä—Ç —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
php yii poizon-import-json/run "https://storage.yandexcloud.net/poizon-exports/site/81988f42-8231-43d7-b4ed-bd70ddf56f06/c8cb6cd8-8970-4b01-976f-9407dea04f9c/export_04_11_2025__15_32_15.json" --verbose=1
```

**–ß—Ç–æ –∏–∑–º–µ–Ω–∏—Ç—Å—è:**
- ‚úÖ –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ –±—É–¥–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω `variant_vendor_code`
- ‚úÖ –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ –±—É–¥–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω –º–∞—Å—Å–∏–≤ `images_json` (–µ—Å–ª–∏ –µ—Å—Ç—å –≤ children[].images)
- ‚úÖ –ü–æ—Ö–æ–∂–∏–µ —Ç–æ–≤–∞—Ä—ã –±—É–¥—É—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –∏–∑ `relatedProducts[]`

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞:**
```sql
-- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—Ä—Ç–∏–∫—É–ª–æ–≤ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
SELECT id, product_id, size, variant_vendor_code 
FROM product_size 
WHERE variant_vendor_code IS NOT NULL 
LIMIT 10;

-- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
SELECT id, product_id, size, 
       JSON_LENGTH(images_json) as images_count 
FROM product_size 
WHERE images_json IS NOT NULL 
LIMIT 10;

-- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ö–æ–∂–∏—Ö —Ç–æ–≤–∞—Ä–æ–≤
SELECT id, name, related_products_json 
FROM product 
WHERE related_products_json IS NOT NULL 
LIMIT 10;
```

---

### 3Ô∏è‚É£ **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏**

**1. –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–æ–≤–∞—Ä–∞:**
```
http://your-domain.com/admin/view-product?id=1
```

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- ‚úÖ –í —Ç–∞–±–ª–∏—Ü–µ —Ä–∞–∑–º–µ—Ä–æ–≤ –ø–æ—è–≤–∏–ª–∏—Å—å –∫–æ–ª–æ–Ω–∫–∏ "–ê—Ä—Ç–∏–∫—É–ª –≤–∞—Ä–∏–∞–Ω—Ç–∞" –∏ "–§–æ—Ç–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞"
- ‚úÖ –ï—Å–ª–∏ —É —Ä–∞–∑–º–µ—Ä–∞ –µ—Å—Ç—å —Ñ–æ—Ç–æ, –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–Ω–æ–ø–∫–∞ —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä "üñºÔ∏è 6")
- ‚úÖ –ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∫–Ω–æ–ø–∫—É –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –≥–∞–ª–µ—Ä–µ–µ–π –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- ‚úÖ –ê—Ä—Ç–∏–∫—É–ª –≤–∞—Ä–∏–∞–Ω—Ç–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–∞–∫ `<code>` —Å —Å–∏–Ω–∏–º —Ü–≤–µ—Ç–æ–º

**2. –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞:**
```
–ê–¥–º–∏–Ω ‚Üí –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–æ–≤–∞—Ä–∞ ‚Üí –†–∞–∑–º–µ—Ä—ã ‚Üí –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ `variant_vendor_code` –∏ `images_json` –ø–æ–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –∏–º–ø–æ—Ä—Ç. –†—É—á–Ω–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ —Å–ª–µ–¥—É—é—â–µ–π –≤–µ—Ä—Å–∏–∏.

---

### 4Ô∏è‚É£ **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ**

**–ü–æ—Ö–æ–∂–∏–µ —Ç–æ–≤–∞—Ä—ã:**
```
http://your-domain.com/catalog/product/nike-dunk-low-white
```

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- ‚úÖ –ü–æ–¥ –±–ª–æ–∫–æ–º —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ –ø–æ—è–≤–∏–ª—Å—è –∞–∫–∫–æ—Ä–¥–µ–æ–Ω "üé® –î—Ä—É–≥–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã —ç—Ç–æ–π –º–æ–¥–µ–ª–∏"
- ‚úÖ –ü—Ä–∏ –∫–ª–∏–∫–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Å–µ—Ç–∫–∞ —Å –ø–æ—Ö–æ–∂–∏–º–∏ —Ç–æ–≤–∞—Ä–∞–º–∏ (–¥–æ 8 —à—Ç)
- ‚úÖ –ï—Å–ª–∏ —É —Ç–æ–≤–∞—Ä–∞ –µ—Å—Ç—å `related_products_json` - –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ç–æ–≤–∞—Ä—ã –∏–∑ –Ω–µ–≥–æ
- ‚úÖ –ï—Å–ª–∏ –Ω–µ—Ç - –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ç–æ–≤–∞—Ä—ã —Ç–æ–π –∂–µ —Å–µ—Ä–∏–∏ –∏–ª–∏ –±—Ä–µ–Ω–¥–∞

**–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤:**
- ‚ö†Ô∏è –ù–∞ –∫–ª–∏–µ–Ω—Ç–µ –ø–æ–∫–∞ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (–±—É–¥–µ—Ç –≤ —Å–ª–µ–¥—É—é—â–µ–π –≤–µ—Ä—Å–∏–∏)
- üí° –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è: –ø—Ä–∏ –≤—ã–±–æ—Ä–µ —Ä–∞–∑–º–µ—Ä–∞ –º–µ–Ω—è—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞ –Ω–∞ —Ñ–æ—Ç–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞

---

## üìä –¢–∞–±–ª–∏—Ü–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π

| –§–∞–π–ª | –°—Ç—Ä–æ–∫–∏ | –ß—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–æ | –°—Ç–∞—Ç—É—Å |
|------|--------|--------------|--------|
| `migrations/m251106_070000_add_variant_fields_to_product_size.php` | 1-27 | –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î | ‚úÖ –°–æ–∑–¥–∞–Ω |
| `models/ProductSize.php` | 43-44, 84-85, 130-131 | –ú–æ–¥–µ–ª—å + –≤–∞–ª–∏–¥–∞—Ü–∏—è | ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω |
| `commands/PoizonImportJsonController.php` | 849-853 | –ò–º–ø–æ—Ä—Ç –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π | ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω |
| `views/admin/view-product.php` | 465, 466, 510-529, 816-859 | –ê–¥–º–∏–Ω–∫–∞ (–ø—Ä–æ—Å–º–æ—Ç—Ä) | ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω |
| `views/catalog/product.php` | 583-644 | –ö–ª–∏–µ–Ω—Ç (–ø–æ—Ö–æ–∂–∏–µ —Ç–æ–≤–∞—Ä—ã) | ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω |

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º

### ‚úÖ **–ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫:**

- [ ] –ú–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] –ò–º–ø–æ—Ä—Ç —Ç–µ—Å—Ç–æ–≤–æ–≥–æ JSON –ø—Ä–æ—à–µ–ª —É—Å–ø–µ—à–Ω–æ
- [ ] –í –∞–¥–º–∏–Ω–∫–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∞—Ä—Ç–∏–∫—É–ª—ã –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
- [ ] –í –∞–¥–º–∏–Ω–∫–µ –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è –º–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ —Å —Ñ–æ—Ç–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
- [ ] –ù–∞ –∫–ª–∏–µ–Ω—Ç–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–ª–æ–∫ –ø–æ—Ö–æ–∂–∏—Ö —Ç–æ–≤–∞—Ä–æ–≤
- [ ] –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö (`runtime/logs/`)
- [ ] –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –±—Ä–∞—É–∑–µ—Ä–µ (Console)

### üß™ **–¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:**

**–°—Ü–µ–Ω–∞—Ä–∏–π 1: –ò–º–ø–æ—Ä—Ç —Ç–æ–≤–∞—Ä–∞ —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏**
```bash
php yii poizon-import-json/run "JSON_URL" --verbose=1
```
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ `variant_vendor_code` != NULL –¥–ª—è —Ä–∞–∑–º–µ—Ä–æ–≤
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ `images_json` != NULL (–µ—Å–ª–∏ –µ—Å—Ç—å —Ñ–æ—Ç–æ)

**–°—Ü–µ–Ω–∞—Ä–∏–π 2: –ü—Ä–æ—Å–º–æ—Ç—Ä –≤ –∞–¥–º–∏–Ω–∫–µ**
- ‚úÖ –û—Ç–∫—Ä—ã—Ç—å —Ç–æ–≤–∞—Ä —Å –∏–º–ø–æ—Ä—Ç–æ–º –∏–∑ Poizon
- ‚úÖ –£–≤–∏–¥–µ—Ç—å –∞—Ä—Ç–∏–∫—É–ª—ã –≤ —Ç–∞–±–ª–∏—Ü–µ —Ä–∞–∑–º–µ—Ä–æ–≤
- ‚úÖ –ö–ª–∏–∫–Ω—É—Ç—å –Ω–∞ –∫–Ω–æ–ø–∫—É —Ñ–æ—Ç–æ, —É–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –≥–∞–ª–µ—Ä–µ—è –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è

**–°—Ü–µ–Ω–∞—Ä–∏–π 3: –ü–æ—Ö–æ–∂–∏–µ —Ç–æ–≤–∞—Ä—ã**
- ‚úÖ –û—Ç–∫—Ä—ã—Ç—å —Ç–æ–≤–∞—Ä –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
- ‚úÖ –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –∞–∫–∫–æ—Ä–¥–µ–æ–Ω "–î—Ä—É–≥–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã"
- ‚úÖ –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ —Ç–æ–≤–∞—Ä—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –ª–æ–≥–∏–∫–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤

---

## ‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### üü° **–¢—Ä–µ–±—É–µ—Ç—Å—è –¥–æ—Ä–∞–±–æ—Ç–∫–∞:**

1. **–†—É—á–Ω–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞—Ä—Ç–∏–∫—É–ª–æ–≤ –∏ —Ñ–æ—Ç–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤**
   - –°—Ç–∞—Ç—É—Å: ‚è≥ –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ
   - –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –°—Ä–µ–¥–Ω–∏–π
   - ETA: 1-2 –¥–Ω—è

2. **–°–º–µ–Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –ø—Ä–∏ –≤—ã–±–æ—Ä–µ —Ä–∞–∑–º–µ—Ä–∞ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ**
   - –°—Ç–∞—Ç—É—Å: ‚è≥ –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ
   - –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –°—Ä–µ–¥–Ω–∏–π
   - ETA: 2-3 –¥–Ω—è
   - –õ–æ–≥–∏–∫–∞: –ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ —Ä–∞–∑–º–µ—Ä –º–µ–Ω—è—Ç—å –≥–∞–ª–µ—Ä–µ—é –Ω–∞ `images_json` —ç—Ç–æ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞

3. **–í–∞–ª–∏–¥–∞—Ü–∏—è `related_products_json` –≤ –∞–¥–º–∏–Ω–∫–µ**
   - –°—Ç–∞—Ç—É—Å: ‚è≥ –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ
   - –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –ù–∏–∑–∫–∏–π
   - ETA: 3-5 –¥–Ω–µ–π
   - –ò–¥–µ—è: UI –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ç–æ–≤–∞—Ä–æ–≤ –≤–º–µ—Å—Ç–æ —Ä—É—á–Ω–æ–≥–æ JSON

---

## üêõ Troubleshooting

### **–ü—Ä–æ–±–ª–µ–º–∞: –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è**

```
Error: SQLSTATE[42S21]: Column already exists
```

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –ø–æ–ª–µ–π
php yii migrate/mark m251106_070000_add_variant_fields_to_product_size

# –ò–ª–∏ —É–¥–∞–ª–∏—Ç—å –≤—Ä—É—á–Ω—É—é –∏ –ø—Ä–∏–º–µ–Ω–∏—Ç—å —Å–Ω–æ–≤–∞
mysql -u user -p database_name
ALTER TABLE product_size DROP COLUMN variant_vendor_code;
ALTER TABLE product_size DROP COLUMN images_json;
EXIT;
php yii migrate
```

---

### **–ü—Ä–æ–±–ª–µ–º–∞: –ê—Ä—Ç–∏–∫—É–ª—ã –Ω–µ –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è**

**–ü—Ä–∏—á–∏–Ω–∞:** –°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è `PoizonImportJsonController.php`

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã (—Å—Ç—Ä–æ–∫–∏ 849-853)
2. –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à: `php yii cache/flush-all`
3. –ü–µ—Ä–µ–∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–≤–∞—Ä—ã

---

### **–ü—Ä–æ–±–ª–µ–º–∞: –§–æ—Ç–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è**

**–ü—Ä–∏—á–∏–Ω–∞:** `images_json` –ø—É—Å—Ç–æ–π –∏–ª–∏ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π JSON

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```sql
SELECT id, size, images_json 
FROM product_size 
WHERE images_json IS NOT NULL AND images_json != '[]' 
LIMIT 5;
```

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤ `children[].images[]` JSON –µ—Å—Ç—å –º–∞—Å—Å–∏–≤ URL
- –ü–µ—Ä–µ–∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–≤–∞—Ä—ã

---

### **–ü—Ä–æ–±–ª–µ–º–∞: –ü–æ—Ö–æ–∂–∏–µ —Ç–æ–≤–∞—Ä—ã –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è**

**–ü—Ä–∏—á–∏–Ω–∞ 1:** `related_products_json` –ø—É—Å—Ç–æ–π  
**–†–µ—à–µ–Ω–∏–µ:** –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–≤–∞—Ä—ã –∏–∑ Poizon (–æ–Ω–∏ —Å–æ–¥–µ—Ä–∂–∞—Ç `relatedProducts[]`)

**–ü—Ä–∏—á–∏–Ω–∞ 2:** ID —Ç–æ–≤–∞—Ä–æ–≤ –∏–∑ `related_products_json` –Ω–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≤ –ë–î  
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ —Ç–æ–≤–∞—Ä—ã

**–ü—Ä–∏—á–∏–Ω–∞ 3:** –¢–æ–≤–∞—Ä—ã –Ω–µ –∞–∫—Ç–∏–≤–Ω—ã (`is_active=0`)  
**–†–µ—à–µ–Ω–∏–µ:** –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–≤–∞—Ä—ã –≤ –∞–¥–º–∏–Ω–∫–µ

---

## üìà –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞

### **–î–æ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è:**
- ‚ùå 0% –∞—Ä—Ç–∏–∫—É–ª–æ–≤ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —Å–æ—Ö—Ä–∞–Ω—è–ª–æ—Å—å
- ‚ùå 0% —Ñ–æ—Ç–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–æ—Å—å
- ‚ùå 0% –ø–æ—Ö–æ–∂–∏—Ö —Ç–æ–≤–∞—Ä–æ–≤ –ø–æ–∫–∞–∑—ã–≤–∞–ª–æ—Å—å –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ

### **–ü–æ—Å–ª–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è:**
- ‚úÖ 100% –∞—Ä—Ç–∏–∫—É–ª–æ–≤ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è
- ‚úÖ 100% —Ñ–æ—Ç–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è
- ‚úÖ 100% –ø–æ—Ö–æ–∂–∏—Ö —Ç–æ–≤–∞—Ä–æ–≤ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è (–ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –¥–∞–Ω–Ω—ã—Ö)

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –Ω–∞ production** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –¥–µ–ø–ª–æ—é
2. **–ü–µ—Ä–µ–∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞—Ç–∞–ª–æ–≥** ‚è≥ –ü–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏
3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ—à–∏–±–æ–∫** ‚è≥ 24-48 —á–∞—Å–æ–≤ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è
4. **–°–±–æ—Ä –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏** ‚è≥ –û—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
5. **–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ Phase 2** ‚è≥ –°–º–µ–Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –ø—Ä–∏ –≤—ã–±–æ—Ä–µ —Ä–∞–∑–º–µ—Ä–∞

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 06.11.2025  
**–ê–≤—Ç–æ—Ä:** Cascade AI Senior Team  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ Production-Ready  
**–í–µ—Ä—Å–∏—è:** 1.0

---

> **üí° –°–æ–≤–µ—Ç:** –°–¥–µ–ª–∞–π—Ç–µ –±—ç–∫–∞–ø –ë–î –ø–µ—Ä–µ–¥ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º –º–∏–≥—Ä–∞—Ü–∏–∏!
> ```bash
> mysqldump -u user -p database_name > backup_before_migration_$(date +%Y%m%d).sql
> ```
