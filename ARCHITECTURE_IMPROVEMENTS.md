# –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è: —Ç–µ–∫—É—â–µ–µ vs –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ

---

## üìê –¢–µ–∫—É—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                        USER                              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                         ‚îÇ
                         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                   Nginx / Apache                         ‚îÇ
‚îÇ            ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                  ‚îÇ
‚îÇ            ‚îÇ   Static Files (no cache) ‚îÇ                  ‚îÇ
‚îÇ            ‚îÇ   CSS: 150 KB unminified ‚îÇ                  ‚îÇ
‚îÇ            ‚îÇ   JS: 89 KB unminified   ‚îÇ                  ‚îÇ
‚îÇ            ‚îÇ   Images: JPEG (large)   ‚îÇ                  ‚îÇ
‚îÇ            ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                         ‚îÇ
                         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              Yii2 Application (PHP)                      ‚îÇ
‚îÇ                                                          ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îÇ
‚îÇ   ‚îÇ       CatalogController (1700 lines)     ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ actionIndex()                       ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ actionProduct()                     ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ actionFilter() ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê           ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ actionSearch()          ‚îÇ           ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ actionAddFavorite()     ‚îÇ           ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ actionQuickOrder()      ‚îÇ           ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ   ‚îî‚îÄ + 15 more actions...    ‚îÇ           ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ                               ‚îÇ           ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ   ‚ö†Ô∏è –ü–†–û–ë–õ–ï–ú–ê: Fat Controller‚îÇ           ‚îÇ          ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îÇ
‚îÇ                                   ‚îÇ                      ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îÇ
‚îÇ   ‚îÇ     Direct DB Queries (N+1 problem)      ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ   - 50-60 queries per page load          ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ   - No eager loading optimization        ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ   - No indexes on filters                ‚îÇ          ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                    ‚îÇ
                                    ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                  MySQL Database                          ‚îÇ
‚îÇ                                                          ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îÇ
‚îÇ   ‚îÇ   product (50,000 rows)                  ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ   ‚ùå Missing indexes on:                 ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ      - brand_id + is_active              ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ      - category_id + is_active           ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ      - slug (not unique index)           ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ                                          ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ   product_size (150,000 rows)            ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ   ‚ùå Missing index on:                   ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ      - product_id + is_available         ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ                                          ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ   ‚ö†Ô∏è FULL TABLE SCAN –Ω–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ö        ‚îÇ          ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                  FileCache (–º–µ–¥–ª–µ–Ω–Ω—ã–π)                   ‚îÇ
‚îÇ   - Disk I/O –Ω–∞ –∫–∞–∂–¥—ã–π read/write                       ‚îÇ
‚îÇ   - No TTL management                                    ‚îÇ
‚îÇ   - Bottleneck –ø—Ä–∏ 100+ concurrent users                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ü—Ä–æ–±–ª–µ–º—ã:**
- üêå 1200ms –∑–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Ç–∞–ª–æ–≥–∞
- üî• 50-60 SQL –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É
- ‚ùå Full table scan –Ω–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ö
- üíæ FileCache —Ç–æ—Ä–º–æ–∑–∏—Ç –ø—Ä–∏ –Ω–∞–≥—Ä—É–∑–∫–µ
- üì¶ Fat Controller (1700 —Å—Ç—Ä–æ–∫)

---

## üöÄ –û–ø—Ç–∏–º–∞–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                        USER                              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                         ‚îÇ
                         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                   Nginx (HTTP/2 + Gzip)                  ‚îÇ
‚îÇ            ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                  ‚îÇ
‚îÇ            ‚îÇ   Static Files (cached)  ‚îÇ                  ‚îÇ
‚îÇ            ‚îÇ   CSS: 60 KB minified    ‚îÇ ‚Üê -60%           ‚îÇ
‚îÇ            ‚îÇ   JS: 35 KB minified     ‚îÇ ‚Üê -60%           ‚îÇ
‚îÇ            ‚îÇ   Images: WebP           ‚îÇ ‚Üê -70%           ‚îÇ
‚îÇ            ‚îÇ   Cache: 30 days         ‚îÇ                  ‚îÇ
‚îÇ            ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                  ‚îÇ
‚îÇ                                                          ‚îÇ
‚îÇ   location ~* \.(jpg|css|js|webp)$ {                    ‚îÇ
‚îÇ       expires 30d;                                       ‚îÇ
‚îÇ       add_header Cache-Control "public, immutable";      ‚îÇ
‚îÇ   }                                                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                         ‚îÇ
                         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              Yii2 Application (PHP) + Services           ‚îÇ
‚îÇ                                                          ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îÇ
‚îÇ   ‚îÇ   CatalogController (300 lines)          ‚îÇ ‚Üê Slim   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ actionIndex()                       ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ    ‚îî‚îÄ> CatalogService::getProducts() ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ actionProduct()                     ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ    ‚îî‚îÄ> ProductService::getById()     ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ actionFilter()                      ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ    ‚îî‚îÄ> FilterService::apply()        ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ   ‚îî‚îÄ actionQuickOrder()                  ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ        ‚îî‚îÄ> OrderService::createQuick()   ‚îÇ          ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îÇ
‚îÇ                                                          ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îÇ
‚îÇ   ‚îÇ         Service Layer (NEW)              ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ CatalogService                      ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ    ‚îî‚îÄ getProducts() with caching     ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ ProductService                      ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ    ‚îî‚îÄ batch loading, denormalization ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ FilterService                       ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ    ‚îî‚îÄ smart filters with cache       ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ   ‚îî‚îÄ OrderService                        ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ        ‚îî‚îÄ quick order logic              ‚îÇ          ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îÇ
‚îÇ                           ‚îÇ                              ‚îÇ
‚îÇ                           ‚ñº                              ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îÇ
‚îÇ   ‚îÇ    Repository Pattern (NEW)              ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ   - ProductRepository::findWithCache()   ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ   - 3-5 queries with batch loading       ‚îÇ ‚Üê -90%   ‚îÇ
‚îÇ   ‚îÇ   - Denormalized fields usage            ‚îÇ          ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚îÇ
                        ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                Redis Cache Layer (NEW)                   ‚îÇ
‚îÇ                                                          ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îÇ
‚îÇ   ‚îÇ  Cache Key Strategy:                     ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ  - catalog_page_{page}_{filters_hash}    ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ  - product_{id}                          ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ  - filters_data_v2                       ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ  - user_favorites_{user_id}              ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ                                          ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ  TTL: 5-30 –º–∏–Ω—É—Ç                         ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ  Invalidation: on product update         ‚îÇ          ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îÇ
‚îÇ                                                          ‚îÇ
‚îÇ   ‚úÖ 2ms read time (vs 50ms FileCache)                  ‚îÇ
‚îÇ   ‚úÖ Supports 500+ concurrent users                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                         ‚îÇ
                         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ            MySQL Database (Optimized)                    ‚îÇ
‚îÇ                                                          ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îÇ
‚îÇ   ‚îÇ   product (50,000 rows)                  ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ   ‚úÖ Indexes:                            ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ      - idx_brand_active                  ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ      - idx_category_active               ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ      - idx_slug (unique)                 ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ      - idx_views_count                   ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ                                          ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ   ‚úÖ Denormalized fields:                ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ      - brand_name (no JOIN)              ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ      - category_name (no JOIN)           ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ      - main_image_url (no JOIN)          ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ      - sizes_json (NEW)                  ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ      - colors_json (NEW)                 ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ      - min_price, max_price              ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ                                          ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ   product_size (150,000 rows)            ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ   ‚úÖ Index: idx_product_available        ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ                                          ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ   ‚úÖ INDEX SCAN –≤–º–µ—Å—Ç–æ FULL TABLE SCAN  ‚îÇ          ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îÇ
‚îÇ                                                          ‚îÇ
‚îÇ   Query Performance:                                     ‚îÇ
‚îÇ   - Filters: 250ms ‚Üí 30ms (-88%)                        ‚îÇ
‚îÇ   - Product page: 150ms ‚Üí 40ms (-73%)                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–£–ª—É—á—à–µ–Ω–∏—è:**
- ‚ö° 300ms –∑–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Ç–∞–ª–æ–≥–∞ (-75%)
- üöÄ 3-5 SQL –∑–∞–ø—Ä–æ—Å–æ–≤ (-90%)
- ‚úÖ Index scan –Ω–∞ –≤—Å–µ—Ö —Ñ–∏–ª—å—Ç—Ä–∞—Ö
- üíæ Redis –∫—ç—à (+25x —Å–∫–æ—Ä–æ—Å—Ç—å)
- üì¶ Service Layer (—á–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)

---

## üéØ –ü–æ—ç—Ç–∞–ø–Ω–æ–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ

### –§–∞–∑–∞ 1: Quick Wins (30 –º–∏–Ω—É—Ç)
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Indexes   ‚îÇ  ‚Üê 5 –º–∏–Ω—É—Ç
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ
       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇBatch Loading‚îÇ  ‚Üê 10 –º–∏–Ω—É—Ç
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ
       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Redis     ‚îÇ  ‚Üê 15 –º–∏–Ω—É—Ç
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

–†–µ–∑—É–ª—å—Ç–∞—Ç: +300% —Å–∫–æ—Ä–æ—Å—Ç–∏
```

### –§–∞–∑–∞ 2: Optimization (1 –Ω–µ–¥–µ–ª—è)
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Denormalize    ‚îÇ  ‚Üê sizes_json, colors_json
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Asset Minify   ‚îÇ  ‚Üê CSS/JS —Å–∂–∞—Ç–∏–µ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  WebP Images    ‚îÇ  ‚Üê –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

–†–µ–∑—É–ª—å—Ç–∞—Ç: +500% —Å–∫–æ—Ä–æ—Å—Ç–∏, -60% —Ç—Ä–∞—Ñ–∏–∫–∞
```

### –§–∞–∑–∞ 3: Refactoring (2 –Ω–µ–¥–µ–ª–∏)
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Service Layer      ‚îÇ  ‚Üê –†–∞–∑–±–∏—Ç—å Controller
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚îÇ
           ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Repository Pattern  ‚îÇ  ‚Üê Data access —Å–ª–æ–π
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚îÇ
           ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   DTO / Presenters   ‚îÇ  ‚Üê –í—ã–Ω–µ—Å—Ç–∏ –ª–æ–≥–∏–∫—É –∏–∑ view
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

–†–µ–∑—É–ª—å—Ç–∞—Ç: –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å, —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å
```

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:

| –û–ø–µ—Ä–∞—Ü–∏—è | –°–µ–π—á–∞—Å | –ü–æ—Å–ª–µ Quick Wins | –ü–æ—Å–ª–µ Full Optimization |
|----------|--------|------------------|-------------------------|
| **–ö–∞—Ç–∞–ª–æ–≥ –∑–∞–≥—Ä—É–∑–∫–∞** | 1200ms | 300ms | 200ms |
| **SQL –∑–∞–ø—Ä–æ—Å–æ–≤** | 50-60 | 3-5 | 2-3 |
| **–§–∏–ª—å—Ç—Ä—ã** | 250ms | 30ms | 20ms |
| **–ì–ª–∞–≤–Ω–∞—è (–∫—ç—à)** | 1200ms | 50ms | 50ms |
| **Product page** | 800ms | 200ms | 150ms |

### –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å:

| –ú–µ—Ç—Ä–∏–∫–∞ | –°–µ–π—á–∞—Å | –ü–æ—Å–ª–µ Quick Wins | –ü–æ—Å–ª–µ Full Optimization |
|---------|--------|------------------|-------------------------|
| **Concurrent users** | 100 | 500 | 1000+ |
| **RPS (req/sec)** | 50 | 200 | 400 |
| **Server CPU** | 70% | 25% | 15% |
| **Memory usage** | 512 MB | 256 MB | 128 MB |

### –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞:

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –°–µ–π—á–∞—Å | –¶–µ–ª—å |
|----------|--------|------|
| **CatalogController** | 1700 —Å—Ç—Ä–æ–∫ | 300 —Å—Ç—Ä–æ–∫ |
| **product.php view** | 4722 —Å—Ç—Ä–æ–∫–∏ | 500 —Å—Ç—Ä–æ–∫ (—Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥) |
| **Cyclomatic Complexity** | 25 | 5-10 |
| **Test Coverage** | 0% | 70%+ |

---

## üèóÔ∏è Service Layer —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```php
// app/services/CatalogService.php
class CatalogService
{
    private $productRepository;
    private $filterService;
    private $cache;

    public function getProducts($filters = [])
    {
        $cacheKey = $this->getCacheKey($filters);
        
        return $this->cache->getOrSet($cacheKey, function() use ($filters) {
            // Batch loading —Å –¥–µ–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–µ–π
            $products = $this->productRepository->findActive($filters);
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º sizes/colors –æ–¥–Ω–∏–º –∑–∞–ø—Ä–æ—Å–æ–º
            $this->productRepository->loadRelations($products);
            
            return $products;
        }, 300);
    }
}

// app/repositories/ProductRepository.php
class ProductRepository
{
    public function findActive($filters = [])
    {
        $query = Product::find()
            ->select(['id', 'name', 'slug', 'brand_name', 'price', 'main_image_url'])
            ->where(['is_active' => 1]);
        
        // –ü—Ä–∏–º–µ–Ω—è–µ–º —Ñ–∏–ª—å—Ç—Ä—ã
        if (!empty($filters['brand_id'])) {
            $query->andWhere(['brand_id' => $filters['brand_id']]);
        }
        
        return $query->all();
    }
    
    public function loadRelations($products)
    {
        // Batch loading sizes
        $productIds = array_column($products, 'id');
        $sizes = ProductSize::find()
            ->where(['product_id' => $productIds])
            ->all();
        
        // –ì—Ä—É–ø–ø–∏—Ä—É–µ–º –∏ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ–º
        $sizesByProduct = [];
        foreach ($sizes as $size) {
            $sizesByProduct[$size->product_id][] = $size;
        }
        
        foreach ($products as $product) {
            $product->populateRelation('sizes', $sizesByProduct[$product->id] ?? []);
        }
    }
}

// controllers/CatalogController.php (slim)
class CatalogController extends Controller
{
    private $catalogService;
    
    public function __construct($id, $module, CatalogService $catalogService, $config = [])
    {
        $this->catalogService = $catalogService;
        parent::__construct($id, $module, $config);
    }
    
    public function actionIndex()
    {
        $filters = Yii::$app->request->queryParams;
        $products = $this->catalogService->getProducts($filters);
        
        return $this->render('index', ['products' => $products]);
    }
}
```

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç –ø–µ—Ä–µ—Ö–æ–¥–∞

### –ù–µ–¥–µ–ª—è 1:
- [ ] –°–æ–∑–¥–∞—Ç—å `app/services/` –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
- [ ] –°–æ–∑–¥–∞—Ç—å `app/repositories/` –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã –ë–î (–º–∏–≥—Ä–∞—Ü–∏—è –≥–æ—Ç–æ–≤–∞)
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Redis
- [ ] –í–Ω–µ–¥—Ä–∏—Ç—å batch loading
- [ ] –ó–∞–º–µ—Ä–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –¥–æ/–ø–æ—Å–ª–µ

### –ù–µ–¥–µ–ª—è 2:
- [ ] –°–æ–∑–¥–∞—Ç—å `CatalogService`
- [ ] –°–æ–∑–¥–∞—Ç—å `ProductRepository`
- [ ] –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ `CatalogController::actionIndex()`
- [ ] Unit —Ç–µ—Å—Ç—ã –¥–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤

### –ù–µ–¥–µ–ª—è 3:
- [ ] –î–µ–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è (sizes_json, colors_json)
- [ ] Asset –º–∏–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è
- [ ] WebP –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è
- [ ] –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ù–µ–¥–µ–ª—è 4:
- [ ] Monitoring (New Relic/DataDog)
- [ ] CDN setup
- [ ] Production deploy
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è –∫–æ–º–∞–Ω–¥—ã

---

**–ò—Ç–æ–≥–æ:** –ü–æ—ç—Ç–∞–ø–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ –æ—Ç –º–æ–Ω–æ–ª–∏—Ç–∞ –∫ —á–∏—Å—Ç–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –∑–∞ 4 –Ω–µ–¥–µ–ª–∏ üèóÔ∏è
