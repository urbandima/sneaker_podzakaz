# ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Poizon

## üéØ –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –¥–ª—è –∑–∞–ø—É—Å–∫–∞

### –®–∞–≥ 1: –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ (5 –º–∏–Ω—É—Ç)

```bash
cd /Users/user/CascadeProjects/splitwise
php yii migrate
```

–ü–æ—è–≤—è—Ç—Å—è 3 –Ω–æ–≤—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏ - –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –≤—Å–µ.

---

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (2 –º–∏–Ω—É—Ç—ã)

–û—Ç–∫—Ä–æ–π—Ç–µ `config/params.php` –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ:

```php
// –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û: URL –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö
'poizonXmlUrl' => 'https://–≤–∞—à-url-–∫-xml-—Ñ–∏–¥—É.xml',

// –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: API –∫–ª—é—á (–µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è)
'poizonApiKey' => '–≤–∞—à_–∫–ª—é—á',

// –ö—É—Ä—Å CNY -> BYN (–æ–±–Ω–æ–≤–ª—è–π—Ç–µ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫—É—Ä—Å–∞)
'cnyToBynRate' => 0.45,
```

**–í–∞–∂–Ω–æ:** –ï—Å–ª–∏ —É –≤–∞—Å –Ω–µ—Ç XML —Ñ–∏–¥–∞ –∏–ª–∏ API, –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–∏—Å–∞–º –ø–∞—Ä—Å–∏–Ω–≥–∞ Poizon.

---

### –®–∞–≥ 3: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ (1 –º–∏–Ω—É—Ç–∞)

```bash
php yii poizon-import/test
```

–î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è:
```
‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ!
–ù–∞–π–¥–µ–Ω–æ —Ç–æ–≤–∞—Ä–æ–≤: 1234
```

–ï—Å–ª–∏ –æ—à–∏–±–∫–∞ - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ URL –≤ `params.php`.

---

### –®–∞–≥ 4: –ü–µ—Ä–≤—ã–π –∏–º–ø–æ—Ä—Ç (10-30 –º–∏–Ω—É—Ç)

```bash
# –¢–µ—Å—Ç–æ–≤—ã–π –∏–º–ø–æ—Ä—Ç 50 —Ç–æ–≤–∞—Ä–æ–≤
php yii poizon-import/run --limit=50

# –ò–ª–∏ –ø–æ–ª–Ω—ã–π –∏–º–ø–æ—Ä—Ç (–µ—Å–ª–∏ —É–≤–µ—Ä–µ–Ω—ã)
php yii poizon-import/run --limit=0
```

–í—ã —É–≤–∏–¥–∏—Ç–µ –ø—Ä–æ–≥—Ä–µ—Å—Å:
```
‚úÖ ‚úÖ ‚úÖ üîÑ ‚úÖ ‚è≠Ô∏è  6/50 (12%)
```

---

### –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç (2 –º–∏–Ω—É—Ç—ã)

1. **–ê–¥–º–∏–Ω–∫–∞ –∏–º–ø–æ—Ä—Ç–∞:** https://–≤–∞—à-—Å–∞–π—Ç.by/admin-import
2. **–¢–æ–≤–∞—Ä—ã:** https://–≤–∞—à-—Å–∞–π—Ç.by/catalog
3. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**
   ```sql
   SELECT COUNT(*) FROM product WHERE sku LIKE 'POIZON-%';
   SELECT * FROM import_batch ORDER BY id DESC LIMIT 1;
   ```

---

### –®–∞–≥ 6: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é (5 –º–∏–Ω—É—Ç)

**–í–∞—Ä–∏–∞–Ω—Ç –ê: –ß–µ—Ä–µ–∑ cron (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**

```bash
# –û—Ç–∫—Ä—ã—Ç—å crontab
crontab -e

# –î–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–æ–∫—É (–∏–º–ø–æ—Ä—Ç –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 3:00)
0 3 * * * cd /Users/user/CascadeProjects/splitwise && php yii poizon-import/run --limit=0 >> runtime/logs/poizon-import.log 2>&1
```

**–í–∞—Ä–∏–∞–Ω—Ç –ë: –ß–µ—Ä–µ–∑ –≥–æ—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç**

```bash
# –°–¥–µ–ª–∞—Ç—å –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º
chmod +x poizon-import-cron.sh

# –î–æ–±–∞–≤–∏—Ç—å –≤ crontab
0 3 * * * /Users/user/CascadeProjects/splitwise/poizon-import-cron.sh
```

---

## ‚úÖ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å —Ç–æ–≤–∞—Ä—ã –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è —Ä–∞–∑ –≤ —Å—É—Ç–∫–∏.

---

## üîß –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∏–º–ø–æ—Ä—Ç–∞
php yii poizon-import/logs

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥–µ—Ç–∞–ª–∏ –∏–º–ø–æ—Ä—Ç–∞ #5
php yii poizon-import/logs 5

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∏–º–ø–æ—Ä—Ç –≤—Ä—É—á–Ω—É—é
php yii poizon-import/run --limit=100

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ cron
tail -f runtime/logs/poizon-import.log
```

---

## üé® –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å

URL: **https://–≤–∞—à-—Å–∞–π—Ç.by/admin-import**

–¢—Ä–µ–±—É–µ—Ç —Ä–æ–ª—å: **admin**

–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤—Å–µ—Ö –∏–º–ø–æ—Ä—Ç–æ–≤
- ‚ñ∂Ô∏è –ó–∞–ø—É—Å–∫ –∏–º–ø–æ—Ä—Ç–∞ —á–µ—Ä–µ–∑ –≤–µ–±
- üìù –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
- ‚ö†Ô∏è –û—à–∏–±–∫–∏ –∏–º–ø–æ—Ä—Ç–∞

---

## üÜò –ü—Ä–æ–±–ª–µ–º—ã?

### "Poizon API Error"
‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `poizonXmlUrl` –≤ `config/params.php`

### "Failed to load XML"
‚Üí –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ XML –¥–æ—Å—Ç—É–ø–µ–Ω: `curl -I –≤–∞—à-url`

### "Validation error"
‚Üí –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –¥–µ—Ç–∞–ª–∏: `php yii poizon-import/logs`

### –ò–º–ø–æ—Ä—Ç –º–µ–¥–ª–µ–Ω–Ω—ã–π
‚Üí –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `--limit=500` –¥–ª—è —á–∞—Å—Ç–µ–π

---

## üìö –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–°–º–æ—Ç—Ä–∏—Ç–µ **POIZON_INTEGRATION.md** - —Ç–∞–º –≤—Å—ë –ø–æ–¥—Ä–æ–±–Ω–æ –æ–ø–∏—Å–∞–Ω–æ (50+ —Å—Ç—Ä–∞–Ω–∏—Ü).

---

**üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Poizon –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞.**
