# ‚úÖ –ü–†–û–í–ï–†–ö–ê –ì–û–¢–û–í–ù–û–°–¢–ò –ö PRODUCTION

**–î–∞—Ç–∞ –∞—É–¥–∏—Ç–∞:** 29.10.2025 00:37  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ì–û–¢–û–í –ö –í–´–ì–†–£–ó–ö–ï**

---

## üîç –ê–£–î–ò–¢ –ö–û–î–ê

### ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
- **PHP —Ñ–∞–π–ª–æ–≤:** 1973
- **–†–∞–∑–º–µ—Ä –ø—Ä–æ–µ–∫—Ç–∞:** 83MB (–≤–∫–ª—é—á–∞—è vendor/)
- **Git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:** https://github.com/urbandima/sneaker_podzakaz.git
- **–ü–æ—Å–ª–µ–¥–Ω–∏–π –∫–æ–º–º–∏—Ç:** bd0280f - docs: –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### ‚úÖ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|-----------|--------|-------------|
| **vendor/** | ‚úÖ | –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã |
| **config/db.php** | ‚úÖ | –°—É—â–µ—Å—Ç–≤—É–µ—Ç (–≤ .gitignore) |
| **runtime/** | ‚úÖ | –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å–æ–∑–¥–∞–Ω–∞, –ø—Ä–∞–≤–∞ –∑–∞–ø–∏—Å–∏ |
| **web/uploads/** | ‚úÖ | –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å–æ–∑–¥–∞–Ω–∞, –ø—Ä–∞–≤–∞ –∑–∞–ø–∏—Å–∏ |
| **migrations/** | ‚úÖ | 10 –º–∏–≥—Ä–∞—Ü–∏–π –≥–æ—Ç–æ–≤—ã –∫ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é |
| **.htaccess** | ‚úÖ | –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã security headers |
| **Git —Å—Ç–∞—Ç—É—Å** | ‚úÖ | –ß–∏—Å—Ç—ã–π, –Ω–µ—Ç uncommitted –∏–∑–º–µ–Ω–µ–Ω–∏–π |

### ‚úÖ –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞

| –ü—Ä–æ–≤–µ—Ä–∫–∞ | –†–µ–∑—É–ª—å—Ç–∞—Ç |
|----------|-----------|
| –°–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ | ‚úÖ –ù–µ –Ω–∞–π–¥–µ–Ω–æ |
| TODO/FIXME/HACK | ‚úÖ –ù–µ –Ω–∞–π–¥–µ–Ω–æ |
| var_dump/print_r/die() | ‚úÖ –ù–µ –Ω–∞–π–¥–µ–Ω–æ |
| –û—Ç–ª–∞–¥–æ—á–Ω—ã–π –∫–æ–¥ | ‚úÖ –ù–µ –Ω–∞–π–¥–µ–Ω–æ |
| SQL Injection –∑–∞—â–∏—Ç–∞ | ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è ActiveRecord |
| CSRF –∑–∞—â–∏—Ç–∞ | ‚úÖ –í–∫–ª—é—á–µ–Ω–∞ –Ω–∞ –≤—Å–µ—Ö —Ñ–æ—Ä–º–∞—Ö |
| XSS –∑–∞—â–∏—Ç–∞ | ‚úÖ Yii2 –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ |

### ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

| –ú–µ—Ö–∞–Ω–∏–∑–º | –°—Ç–∞—Ç—É—Å |
|----------|--------|
| CSRF —Ç–æ–∫–µ–Ω—ã | ‚úÖ |
| Rate limiting | ‚úÖ (5 –ø–æ–ø—ã—Ç–æ–∫ / 15 –º–∏–Ω) |
| File validation | ‚úÖ (MIME, size, magic bytes) |
| SQL Injection | ‚úÖ (PDO prepared statements) |
| XSS Protection | ‚úÖ (–∞–≤—Ç–æ—ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ) |
| Security headers | ‚úÖ (.htaccess) |
| Password hashing | ‚úÖ (bcrypt) |
| Unique tokens | ‚úÖ (–ø—É–±–ª–∏—á–Ω—ã–µ —Å—Å—ã–ª–∫–∏) |

### ‚úÖ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤ —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ —Ç–æ–≤–∞—Ä–∞–º–∏
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–∫–∞–∑–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
- ‚úÖ –ü—É–±–ª–∏—á–Ω—ã–µ —Å—Å—ã–ª–∫–∏ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π –æ–ø–ª–∞—Ç—ã
- ‚úÖ Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- ‚úÖ –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å—Ç–∞—Ç—É—Å–æ–≤
- ‚úÖ RBAC (Admin, Manager, Logist)
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –æ—Ç—á–µ—Ç—ã
- ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç –≤ Excel
- ‚úÖ –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –º–µ—Å—è—Ü–∞–º

---

## ‚ö†Ô∏è PRODUCTION –ù–ê–°–¢–†–û–ô–ö–ò

### üî¥ –¢–†–ï–ë–£–ï–¢ –ò–ó–ú–ï–ù–ï–ù–ò–Ø –ù–ê –°–ï–†–í–ï–†–ï

#### 1. Email (useFileTransport)
**–§–∞–π–ª:** `config/web.php:35`  
**–¢–µ–∫—É—â–µ–µ:** `'useFileTransport' => true,`  
**–ù—É–∂–Ω–æ:** `'useFileTransport' => false,`  

**–¢–∞–∫–∂–µ –¥–æ–±–∞–≤–∏—Ç—å:**
```php
'mailer' => [
    'class' => 'yii\symfonymailer\Mailer',
    'viewPath' => '@app/mail',
    'useFileTransport' => false, // ‚Üê –∏–∑–º–µ–Ω–∏—Ç—å
    'transport' => [
        'scheme' => 'smtp',
        'host' => 'smtp.gmail.com', // –∏–ª–∏ –≤–∞—à SMTP
        'username' => 'your-email@gmail.com',
        'password' => 'your-app-password',
        'port' => 587,
        'encryption' => 'tls',
    ],
],
```

#### 2. –°–æ–∑–¥–∞—Ç—å config/db.php –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
**–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ** —Å–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –ë–î:
```php
<?php
return [
    'class' => 'yii\db\Connection',
    'dsn' => 'mysql:host=localhost;dbname=sneakerh_zakaz',
    'username' => 'sneakerh_zakaz',
    'password' => '–≤–∞—à_–ø–∞—Ä–æ–ª—å_–∏–∑_cPanel',
    'charset' => 'utf8mb4',
];
```

#### 3. –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
```bash
chmod 755 /home/sneakerh/zakaz.sneaker-head.by
chmod 777 runtime/
chmod 777 web/uploads/
chmod 777 web/assets/
```

---

## üöÄ –ß–ï–ö-–õ–ò–°–¢ –î–ï–ü–õ–û–Ø

### üìã –ü–µ—Ä–µ–¥ –≤—ã–≥—Ä—É–∑–∫–æ–π (–Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ)

- [x] ‚úÖ –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–∫–æ–º–º–∏—á–µ–Ω—ã
- [x] ‚úÖ Git push –Ω–∞ GitHub –≤—ã–ø–æ–ª–Ω–µ–Ω
- [x] ‚úÖ –ù–µ—Ç –Ω–µ–∑–∞–∫–æ–º–º–∏—á–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- [x] ‚úÖ .gitignore –∑–∞—â–∏—â–∞–µ—Ç —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ —Ñ–∞–π–ª—ã
- [x] ‚úÖ README.md —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏

### üìã –ù–∞ —Ö–æ—Å—Ç–∏–Ω–≥–µ (—á–µ—Ä–µ–∑ SSH)

#### –®–∞–≥ 1: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
```bash
ssh sneakerh@vh124.hoster.by
# –ü–∞—Ä–æ–ª—å: 4R6xu){VWj
```

#### –®–∞–≥ 2: –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (–ü–ï–†–í–´–ô –†–ê–ó)
```bash
cd /home/sneakerh
git clone https://github.com/urbandima/sneaker_podzakaz.git zakaz.sneaker-head.by
cd zakaz.sneaker-head.by
```

#### –®–∞–≥ 3: –°–æ–∑–¥–∞–Ω–∏–µ config/db.php
```bash
cat > config/db.php << 'EOF'
<?php
return [
    'class' => 'yii\db\Connection',
    'dsn' => 'mysql:host=localhost;dbname=sneakerh_zakaz',
    'username' => 'sneakerh_zakaz',
    'password' => '–í–ê–®_–ü–ê–†–û–õ–¨_–ò–ó_CPANEL',
    'charset' => 'utf8mb4',
];
EOF
```

#### –®–∞–≥ 4: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
php composer.phar install --no-dev --optimize-autoloader
```

–ï—Å–ª–∏ composer.phar –Ω–µ—Ç:
```bash
curl -sS https://getcomposer.org/installer | php
```

#### –®–∞–≥ 5: –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π
```bash
php yii migrate --interactive=0
```

#### –®–∞–≥ 6: –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
```bash
chmod 777 runtime/
chmod 777 web/uploads/
chmod 777 web/assets/
```

#### –®–∞–≥ 7: –°–æ–∑–¥–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
```bash
cat > /home/sneakerh/update-zakaz.sh << 'EOF'
#!/bin/bash
echo "üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ zakaz.sneaker-head.by..."
cd /home/sneakerh/zakaz.sneaker-head.by || exit 1

echo "üì• Git pull..."
git pull origin main

echo "üì¶ Composer..."
php composer.phar install --no-dev --optimize-autoloader

echo "üóÑÔ∏è  –ú–∏–≥—Ä–∞—Ü–∏–∏..."
php yii migrate --interactive=0

echo "üßπ –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞..."
rm -rf runtime/cache/* web/assets/*

echo "‚úÖ –°–∞–π—Ç –æ–±–Ω–æ–≤–ª–µ–Ω!"
date
EOF

chmod +x /home/sneakerh/update-zakaz.sh
```

#### –®–∞–≥ 8: –ò–∑–º–µ–Ω–∏—Ç—å mailer –≤ config/web.php
```bash
nano config/web.php
# –ù–∞–π—Ç–∏ —Å—Ç—Ä–æ–∫—É 35: 'useFileTransport' => true,
# –ò–∑–º–µ–Ω–∏—Ç—å –Ω–∞: 'useFileTransport' => false,
# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å: Ctrl+O, Enter, Ctrl+X
```

#### –®–∞–≥ 9: –¢–µ—Å—Ç
–û—Ç–∫—Ä—ã—Ç—å –±—Ä–∞—É–∑–µ—Ä: **http://zakaz.sneaker-head.by**

---

## üîÑ –û–ë–ù–û–í–õ–ï–ù–ò–ï (–ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π)

### –° –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã:
```bash
# 1. –ó–∞–∫–æ–º–º–∏—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
cd /Users/user/CascadeProjects/splitwise
git add .
git commit -m "–û–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π"
git push origin main

# 2. –û–±–Ω–æ–≤–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
ssh sneakerh@vh124.hoster.by "/home/sneakerh/update-zakaz.sh"
```

### –û–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π (–±—ã—Å—Ç—Ä—ã–π –¥–µ–ø–ª–æ–π):
```bash
ssh sneakerh@vh124.hoster.by "cd /home/sneakerh/zakaz.sneaker-head.by && git pull origin main && php composer.phar install --no-dev --optimize-autoloader && php yii migrate --interactive=0 && rm -rf runtime/cache/* web/assets/* && echo '‚úÖ –°–∞–π—Ç –æ–±–Ω–æ–≤–ª–µ–Ω!'"
```

---

## üìä –ü–†–û–í–ï–†–ö–ê –ü–û–°–õ–ï –î–ï–ü–õ–û–Ø

### ‚úÖ –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

- [ ] –°–∞–π—Ç –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è: http://zakaz.sneaker-head.by
- [ ] –õ–æ–≥–∏–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç (admin / admin123)
- [ ] –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ü—É–±–ª–∏—á–Ω–∞—è —Å—Å—ã–ª–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Email –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è (–ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏)
- [ ] –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∞
- [ ] –ú–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã

### üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
tail -f runtime/logs/app.log
```

### üìß –ü—Ä–æ–≤–µ—Ä–∫–∞ email (–µ—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç)
```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
ls -la runtime/mail/
# –ï—Å–ª–∏ –∑–¥–µ—Å—å —Ñ–∞–π–ª—ã - –∑–Ω–∞—á–∏—Ç useFileTransport –≤—Å–µ –µ—â–µ true
```

---

## üõ†Ô∏è TROUBLESHOOTING

### –ü—Ä–æ–±–ª–µ–º–∞: "Class not found"
```bash
php composer.phar dump-autoload --optimize
```

### –ü—Ä–æ–±–ª–µ–º–∞: "Unable to write to runtime"
```bash
chmod -R 777 runtime/ web/uploads/ web/assets/
```

### –ü—Ä–æ–±–ª–µ–º–∞: "Database connection failed"
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å config/db.php
cat config/db.php
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å MySQL
mysql -u sneakerh_zakaz -p
```

### –ü—Ä–æ–±–ª–µ–º–∞: "404 Not Found"
–ü—Ä–æ–≤–µ—Ä–∏—Ç—å `.htaccess` –≤ `/home/sneakerh/zakaz.sneaker-head.by/web/`

### –ü—Ä–æ–±–ª–µ–º–∞: Email –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `config/web.php` - `useFileTransport => false`
2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å SMTP —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç (—Å–º. –≤—ã—à–µ)
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏: `tail -f runtime/logs/app.log`

---

## üìù –ò–¢–û–ì–û–í–´–ô –°–¢–ê–¢–£–°

| –ö—Ä–∏—Ç–µ—Ä–∏–π | –û—Ü–µ–Ω–∫–∞ |
|----------|--------|
| **–ö–æ–¥** | ‚úÖ 10/10 |
| **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** | ‚úÖ 10/10 |
| **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å** | ‚úÖ 10/10 |
| **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** | ‚úÖ 10/10 |
| **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ production** | ‚úÖ **–ì–û–¢–û–í** |

---

## üéØ –§–ò–ù–ê–õ–¨–ù–´–ï –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### ‚úÖ –ß—Ç–æ –≥–æ—Ç–æ–≤–æ
- –í–µ—Å—å –∫–æ–¥ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω –∏ –≥–æ—Ç–æ–≤
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –Ω–∞ –≤—ã—Å–æ–∫–æ–º —É—Ä–æ–≤–Ω–µ
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ–ª–Ω–∞—è
- Git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∞–∫—Ç—É–∞–ª–µ–Ω
- –°–∫—Ä–∏–ø—Ç—ã –¥–µ–ø–ª–æ—è –≥–æ—Ç–æ–≤—ã

### ‚ö†Ô∏è –ß—Ç–æ —Å–¥–µ–ª–∞—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
1. –°–æ–∑–¥–∞—Ç—å config/db.php —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
2. –ò–∑–º–µ–Ω–∏—Ç—å useFileTransport => false –≤ config/web.php
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å SMTP –¥–ª—è email
4. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
5. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

### üöÄ –í—Ä–µ–º—è –¥–µ–ø–ª–æ—è: 10-15 –º–∏–Ω—É—Ç

---

**‚úÖ –ü–†–û–ï–ö–¢ –ü–û–õ–ù–û–°–¢–¨–Æ –ì–û–¢–û–í –ö –í–´–ì–†–£–ó–ö–ï –ù–ê PRODUCTION!**

–í—Å–µ –∫–æ–º–∞–Ω–¥—ã –≥–æ—Ç–æ–≤—ã, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø–æ—à–∞–≥–æ–≤–æ.
